"use strict";(self.webpackChunkfakenewsgame=self.webpackChunkfakenewsgame||[]).push([[496],{7192:(e,s,a)=>{a.r(s),a.d(s,{Context:()=>he,default:()=>xe});var t=a(9584),i=a(3948),l=a(4123),c=a(3032),r=a(6940),n=a(8436),d=a(8500),m=a(7572),o=a(3813),h=a(6492),u=a(6596),x=a(7884);const g=function(e){const{isOpen:s,toggleCollapse:a}=e,{t:i}=(0,u.Gy)();return(0,x.jsxs)(t.Fragment,{children:[(0,x.jsx)(r.cH,{to:"#",onClick:a,className:"text-dark",children:(0,x.jsx)(m.c,{id:"profile-user-headingOne",children:(0,x.jsxs)("h5",{className:"font-size-14 m-0",children:[e.iconClass&&(0,x.jsx)("i",{className:e.iconClass+" me-2 align-middle d-inline-block"}),i(e.title),(0,x.jsx)("i",{className:s?"mdi mdi-chevron-up float-end accor-plus-icon":"mdi mdi-chevron-down float-end accor-plus-icon"})]})})}),(0,x.jsx)(o.c,{isOpen:s,children:(0,x.jsx)(h.c,{children:e.children})})]})};const p=function(e){const s=e.files,{t:a}=(0,u.Gy)();return(0,x.jsx)(t.Fragment,{children:s.map(((e,s)=>(0,x.jsx)(n.c,{className:"p-2 border mb-2",children:(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"avatar-sm me-3 ms-0",children:(0,x.jsx)("div",{className:"avatar-title bg-primary-subtle text-primary rounded font-size-20",children:(0,x.jsx)("i",{className:e.thumbnail})})}),(0,x.jsx)("div",{className:"flex-grow-1 overflow-hidden",children:(0,x.jsxs)("div",{className:"text-left",children:[(0,x.jsx)("h5",{className:"font-size-14 mb-1",children:e.name}),(0,x.jsx)("p",{className:"text-muted font-size-13 mb-0",children:e.size})]})}),(0,x.jsx)("div",{className:"ms-4",children:(0,x.jsx)("ul",{className:"list-inline mb-0 font-size-18",children:(0,x.jsx)("li",{className:"list-inline-item"})})})]})},s)))})};var j=a(1368),v=a(2836);const N=function(e){const[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!0),[c,m]=(0,t.useState)(!1),[o,h]=(0,t.useState)([{name:"Fishing\u5fbd\u7ae0",id:"fishing",size:"X2",thumbnail:"ri-image-fill"},{name:"From_where\u5fbd\u7ae0",id:"from_where",size:"X1",thumbnail:"ri-image-fill"},{name:"Picxxxx\u5fbd\u7ae0",id:"picxxxx",size:"X3",thumbnail:"ri-image-fill"},{name:"xxmatchxx\u5fbd\u7ae0",id:"xxmatchxx",size:"X3",thumbnail:"ri-image-fill"},{name:"Emo\u5fbd\u7ae0",id:"emo",size:"X5",thumbnail:"ri-image-fill"}]),[N,f]=(0,t.useState)(0),{proFile:b}=(0,t.useContext)(he),[C,y]=(0,t.useState)("");(0,t.useEffect)((()=>{const e=localStorage.getItem("username");e&&y(e)}),[]),(0,t.useEffect)((()=>{f(o.map((e=>b.badge&&b.badge[e.id]?b.badge[e.id]:0)).reduce(((e,s)=>e+s))),h((e=>e.map((e=>({...e,size:"X".concat(b.badge&&b.badge[e.id]?b.badge[e.id]:0)})))))}),[b]);const{t:S}=(0,u.Gy)();return(0,x.jsx)(t.Fragment,{children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"px-4 pt-4",children:[(0,x.jsx)("div",{className:"user-chat-nav float-end"}),(0,x.jsx)("h4",{className:"mb-0",children:S("\u6211\u7684\u500b\u4eba\u6a94\u6848")})]}),(0,x.jsxs)("div",{className:"text-center p-4 border-bottom",children:[(0,x.jsx)("div",{className:"mb-4",children:(0,x.jsx)("img",{src:j,className:"rounded-circle avatar-lg img-thumbnail",alt:"chatvia"})}),(0,x.jsx)("h5",{className:"font-size-16 mb-1 text-truncate",children:C}),(0,x.jsxs)("p",{className:"text-muted text-truncate mb-1",children:[(0,x.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-success me-1 d-inline-block"})," ",S("\u5728\u7dda")]})]}),(0,x.jsx)(v.c,{style:{maxHeight:"100%"},className:"p-4 user-profile-desc",children:(0,x.jsxs)("div",{className:"p-4 user-profile-desc",children:[(0,x.jsxs)("div",{className:"text-muted",children:[(0,x.jsxs)("p",{className:"mb-4",children:["\u4fe1\u7528\u5ea6\uff1a",(null===b||void 0===b?void 0:b.credit)||10,"/10"]}),(0,x.jsxs)("p",{className:"mb-4",children:["\u95dc\u6ce8\u4eba\u6578\uff1a",(null===b||void 0===b?void 0:b.followers)||0,"\u4eba"]}),(0,x.jsxs)("p",{className:"mb-4",children:["\u8001\u95c6\u6012\u6c23\u503c\uff1a",(null===b||void 0===b?void 0:b.anger)||0,"/10"]}),(0,x.jsxs)("p",{className:"mb-4",children:["\u5fbd\u7ae0\uff1a",N,"/11"]})]}),(0,x.jsxs)("div",{id:"profile-user-accordion-1",className:"custom-accordion",children:[(0,x.jsx)(n.c,{className:"shadow-none border mb-2",children:(0,x.jsxs)(g,{title:"\u6211\u7684\u8cc7\u6599",iconClass:"ri-user-2-line",isOpen:i,toggleCollapse:()=>{l(!i),m(!1)},children:[(0,x.jsx)("div",{className:"float-end",children:(0,x.jsx)(r.cH,{to:"/login",children:(0,x.jsxs)(d.c,{color:"light",size:"sm",type:"button",children:[(0,x.jsx)("i",{className:"ri-edit-fill me-1 align-middle"})," ",S("\u7de8\u8f2f")]})})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-muted mb-1",children:S("\u4f7f\u7528\u8005\u540d\u7a31")}),(0,x.jsx)("h5",{className:"font-size-14",children:C})]}),(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsx)("p",{className:"text-muted mb-1",children:S("\u96fb\u5b50\u90f5\u4ef6")}),(0,x.jsx)("h5",{className:"font-size-14",children:S("adc@123.com")})]}),(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsx)("p",{className:"text-muted mb-1",children:S("\u5730\u9ede")}),(0,x.jsx)("h5",{className:"font-size-14 mb-0",children:S("\u53f0\u7063")})]})]})}),(0,x.jsx)(n.c,{className:"mb-1 shadow-none border",children:(0,x.jsx)(g,{title:"\u5fbd\u7ae0",iconClass:"ri-attachment-line",isOpen:c,toggleCollapse:()=>{m(!c),l(!1)},children:(0,x.jsx)(p,{files:o})})})]})]})})]})})};var f=a(2596),b=a(6892),C=a(1296),y=a(7348);const S=e=>({type:y.M3,payload:e});var z=a(2756),k=a.n(z),w=(a(5176),a(2636)),_=a(9504);const F=a.p+"static/media/avatar-5.349ed6ef9b0d7c3293a3.jpg";var L=a(8552);const M=()=>(0,x.jsx)(t.Fragment,{children:(0,x.jsx)("div",{className:"px-4 pb-4 dot_remove",dir:"ltr",children:(0,x.jsxs)(k(),{responsive:{0:{items:4},1024:{items:4}},disableDotsControls:!1,disableButtonsControls:!1,mouseTracking:!0,children:[(0,x.jsx)("div",{className:"item",children:(0,x.jsxs)(r.cH,{to:"#",className:"user-status-box",children:[(0,x.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,x.jsx)("img",{src:w,alt:"user-img",className:"img-fluid rounded-circle"}),(0,x.jsx)("span",{className:"user-status"})]}),(0,x.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"\u8001\u95c6"})]})}),(0,x.jsx)("div",{className:"item",children:(0,x.jsxs)(r.cH,{to:"#",className:"user-status-box",children:[(0,x.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,x.jsx)("img",{src:_,alt:"user-img",className:"img-fluid rounded-circle"}),(0,x.jsx)("span",{className:"user-status"})]}),(0,x.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"fish\ud83d\udc1f"})]})}),(0,x.jsx)("div",{className:"item",children:(0,x.jsxs)(r.cH,{to:"#",className:"user-status-box",children:[(0,x.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,x.jsx)("img",{src:F,alt:"user-img",className:"img-fluid rounded-circle"}),(0,x.jsx)("span",{className:"user-status"})]}),(0,x.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"from_where"})]})}),(0,x.jsx)("div",{className:"item",children:(0,x.jsxs)(r.cH,{to:"#",className:"user-status-box",children:[(0,x.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,x.jsx)("img",{src:L,alt:"user-img",className:"img-fluid rounded-circle"}),(0,x.jsx)("span",{className:"user-status"})]}),(0,x.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"Picxxxx"})]})}),(0,x.jsx)("div",{className:"item",children:(0,x.jsxs)(r.cH,{to:"#",className:"user-status-box",children:[(0,x.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,x.jsx)("img",{src:L,alt:"user-img",className:"img-fluid rounded-circle"}),(0,x.jsx)("span",{className:"user-status"})]}),(0,x.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"xxmatchxx"})]})}),(0,x.jsx)("div",{className:"item",children:(0,x.jsxs)(r.cH,{to:"#",className:"user-status-box",children:[(0,x.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,x.jsx)("img",{src:L,alt:"user-img",className:"img-fluid rounded-circle"}),(0,x.jsx)("span",{className:"user-status"})]}),(0,x.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"Emo\ud83d\ude12"})]})})]})})});class T extends t.Component{constructor(e){super(e),this.state={searchChat:"",recentChatList:this.props.recentChatList},this.openUserChat=this.openUserChat.bind(this),this.handleChange=this.handleChange.bind(this)}componentDidMount(){var e=document.getElementById("conversation"+this.props.active_user);e&&e.classList.add("active")}componentDidUpdate(e){e!==this.props&&this.setState({recentChatList:this.props.recentChatList})}UNSAFE_componentWillReceiveProps(e){this.props.recentChatList!==e.recentChatList&&this.setState({recentChatList:e.recentChatList})}handleChange(e){this.setState({searchChat:e.target.value});var s=e.target.value;let a=this.state.recentChatList,t=[];for(let i=0;i<a.length;i++)(a[i].name.toLowerCase().includes(s)||a[i].name.toUpperCase().includes(s))&&t.push(a[i]);this.setState({recentChatList:t}),""===s&&this.setState({recentChatList:this.props.recentChatList})}openUserChat(e,s){e.preventDefault();var a=this.props.recentChatList.indexOf(s);this.props.activeUser(a);var t=document.getElementById("chat-list"),i=e.target,l=null;if(t){for(var c=t.getElementsByTagName("li"),r=0;r<c.length;++r)c[r].classList.contains("active")&&c[r].classList.remove("active");for(var n=0;n<c.length;++n)if(c[n].contains(i)){l=c[n];break}}l&&l.classList.add("active");var d=document.getElementsByClassName("user-chat");d&&d[0].classList.add("user-chat-show");var m=document.getElementById("unRead"+s.id);m&&(m.style.display="none")}render(){return(0,x.jsx)(t.Fragment,{children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"px-4 pt-4",children:[(0,x.jsx)("h4",{className:"mb-4",children:"\u804a\u5929\u5ba4"}),(0,x.jsx)("div",{className:"search-box chat-search-box",children:(0,x.jsxs)(f.c,{className:"mb-3 rounded-3",children:[(0,x.jsx)("span",{className:"input-group-text text-muted bg-light pe-1 ps-3",id:"basic-addon1",children:(0,x.jsx)("i",{className:"ri-search-line search-icon font-size-18"})}),(0,x.jsx)(b.c,{type:"text",value:this.state.searchChat,onChange:e=>this.handleChange(e),className:"form-control bg-light",placeholder:"\u641c\u5c0b\u4f7f\u7528\u8005"})]})})]}),(0,x.jsx)(M,{}),(0,x.jsx)("div",{children:(0,x.jsx)(v.c,{className:"chat-message-list",children:(0,x.jsx)("ul",{className:"list-unstyled chat-list chat-user-list px-2",id:"chat-list",children:this.state.recentChatList.map(((e,s)=>(0,x.jsx)("li",{id:"conversation"+s,className:e.unRead?"unread":e.isTyping?"typing":s===this.props.active_user?"active":"",children:(0,x.jsx)(r.cH,{to:"#",onClick:s=>this.openUserChat(s,e),children:(0,x.jsxs)("div",{className:"d-flex",children:["Null"===e.profilePicture?(0,x.jsxs)("div",{className:"chat-user-img "+e.status+" align-self-center ms-0",children:[(0,x.jsx)("div",{className:"avatar-xs",children:(0,x.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:e.name.charAt(0)})}),e.status&&(0,x.jsx)("span",{className:"user-status"})]}):(0,x.jsxs)("div",{className:"chat-user-img "+e.status+" align-self-center ms-0",children:[(0,x.jsx)("img",{src:e.profilePicture,className:"rounded-circle avatar-xs"}),e.status&&(0,x.jsx)("span",{className:"user-status"})]}),(0,x.jsxs)("div",{className:"flex-grow-1 overflow-hidden",children:[(0,x.jsx)("h5",{className:"text-truncate font-size-15 mb-1 ms-3",children:e.name}),(0,x.jsx)("p",{className:"chat-user-message font-size-14 text-truncate mb-0 ms-3",children:e.isTyping?(0,x.jsxs)(x.Fragment,{children:["typing",(0,x.jsxs)("span",{className:"animate-typing",children:[(0,x.jsx)("span",{className:"dot ms-1"}),(0,x.jsx)("span",{className:"dot ms-1"}),(0,x.jsx)("span",{className:"dot ms-1"})]})]}):(0,x.jsxs)(x.Fragment,{children:[e.messages&&e.messages.length>0&&!0===e.messages[e.messages.length-1].isImageMessage?(0,x.jsx)("i",{className:"ri-image-fill align-middle me-1"}):null,e.messages&&e.messages.length>0&&!0===e.messages[e.messages.length-1].isFileMessage?(0,x.jsx)("i",{className:"ri-file-text-fill align-middle me-1"}):null,e.messages&&e.messages.length>0?e.messages[e.messages.length-1].message:null]})})]}),(0,x.jsx)("div",{className:"font-size-11",children:e.messages&&e.messages.length>0?e.messages[e.messages.length-1].time:null}),0===e.unRead?null:(0,x.jsx)("div",{className:"unread-message",id:"unRead"+e.id,children:(0,x.jsx)("span",{className:"badge badge-soft-danger rounded-pill",children:e.messages&&e.messages.length>0?e.unRead>=20?e.unRead+"+":e.unRead:""})})]})})},s)))})})})]})})}}const U=(0,i.Ul)((e=>{const{active_user:s}=e.Chat;return{active_user:s}}),{setconversationNameInOpenChat:C.uK,activeUser:e=>({type:y.AO,payload:e})})(T);var O=a(8544),G=a(9397),E=a(7924),P=a(664),q=a(6896),D=a(1704),H=a(96),I=a(9016);a.p;let A=[{group:"A",children:[{id:0,name:"Demo"}]}];class R extends t.Component{constructor(e){super(e),this.state={contacts:this.props.contacts},this.sortContact=this.sortContact.bind(this)}componentDidUpdate(e){e!==this.props&&this.setState({contacts:this.props.contacts})}sortContact(){let e=this.state.contacts.reduce(((e,s)=>{try{let a=s.name[0];e[a]?e[a].children.push(s):e[a]={group:a,children:[s]}}catch(a){return A}return e}),{}),s=Object.values(e);return this.setState({contacts:s}),A=s,s}componentDidMount(){this.sortContact()}componentWillUnmount(){this.sortContact()}render(){return(0,x.jsx)(t.Fragment,{children:A.map(((e,s)=>(0,x.jsxs)("div",{children:["``  ",(0,x.jsx)("div",{className:"p-3 font-weight-bold text-primary",children:e.group}),(0,x.jsx)("ul",{className:"list-unstyled contact-list",children:e.children.map(((e,s)=>(0,x.jsx)("li",{children:(0,x.jsxs)("div",{className:"form-check",children:[(0,x.jsx)(b.c,{type:"checkbox",className:"form-check-input",onChange:s=>this.props.handleCheck(s,e.id),id:"memberCheck"+e.id,value:e.name}),(0,x.jsx)(q.c,{className:"form-check-label",htmlFor:"memberCheck"+e.id,children:e.name})]})},s)))})]},s)))})}}const B=(0,i.Ul)((e=>{const{contacts:s}=e.Chat;return{contacts:s}}),{})(R);class X extends t.Component{constructor(e){super(e),this.state={modal:!1,isOpenCollapse:!1,groups:this.props.groups,selectedContact:[],isOpenAlert:!1,message:"",groupName:"",groupDesc:""},this.toggle=this.toggle.bind(this),this.toggleCollapse=this.toggleCollapse.bind(this),this.createGroup=this.createGroup.bind(this),this.handleCheck=this.handleCheck.bind(this),this.handleChangeGroupName=this.handleChangeGroupName.bind(this),this.handleChangeGroupDesc=this.handleChangeGroupDesc.bind(this)}toggle(){this.setState({modal:!this.state.modal})}toggleCollapse(){this.setState({isOpenCollapse:!this.state.isOpenCollapse})}componentDidUpdate(e){e!==this.props&&this.setState({groups:this.props.groups})}createGroup(){if(this.state.selectedContact.length>2){var e={gourpId:this.state.groups.length+1,name:"#"+this.state.groupName,profilePicture:"Null",isGroup:!0,unRead:0,isNew:!0,desc:this.state.groupDesc,members:this.state.selectedContact};this.props.createGroup(e),this.toggle()}else 1===this.state.selectedContact.length?this.setState({message:"Minimum 2 members required!!!",isOpenAlert:!0}):this.setState({message:"Please Select Members!!!",isOpenAlert:!0});setTimeout(function(){this.setState({isOpenAlert:!1})}.bind(this),3e3)}handleCheck(e,s){var a,t=this.state.selectedContact;e.target.checked&&(a={id:s,name:e.target.value},t.push(a),this.setState({selectedContact:t}))}handleChangeGroupName(e){this.setState({groupName:e.target.value})}handleChangeGroupDesc(e){this.setState({groupDesc:e.target.value})}render(){const{t:e}=this.props;return(0,x.jsx)(t.Fragment,{children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"p-4",children:[(0,x.jsx)("h4",{className:"mb-4",children:e("\u8cbc\u6587")}),(0,x.jsxs)(O.c,{isOpen:this.state.modal,centered:!0,toggle:this.toggle,children:[(0,x.jsx)(G.c,{tag:"h5",className:"modal-title font-size-14",toggle:this.toggle,children:e("Create New Group")}),(0,x.jsx)(E.c,{className:"p-4",children:(0,x.jsxs)(P.c,{children:[(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)(q.c,{className:"form-label",htmlFor:"addgroupname-input",children:e("Group Name")}),(0,x.jsx)(b.c,{type:"text",className:"form-control",id:"addgroupname-input",value:this.state.groupName,onChange:e=>this.handleChangeGroupName(e),placeholder:"Enter Group Name"})]}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)(q.c,{className:"form-label",children:e("Group Members")}),(0,x.jsx)(D.c,{isOpen:this.state.isOpenAlert,color:"danger",children:this.state.message}),(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsx)(d.c,{color:"light",size:"sm",type:"button",onClick:this.toggleCollapse,children:e("Select Members")})}),(0,x.jsx)(o.c,{isOpen:this.state.isOpenCollapse,id:"groupmembercollapse",children:(0,x.jsxs)(n.c,{className:"border",children:[(0,x.jsx)(m.c,{children:(0,x.jsx)("h5",{className:"font-size-15 mb-0",children:e("Contacts")})}),(0,x.jsx)(h.c,{className:"p-2",children:(0,x.jsx)(v.c,{style:{maxHeight:"150px"},children:(0,x.jsx)("div",{id:"addContacts",children:(0,x.jsx)(B,{handleCheck:this.handleCheck})})})})]})})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)(q.c,{className:"form-label",htmlFor:"addgroupdescription-input",children:"Description"}),(0,x.jsx)("textarea",{className:"form-control",id:"addgroupdescription-input",value:this.state.groupDesc,onChange:e=>this.handleChangeGroupDesc(e),rows:"3",placeholder:"Enter Description"})]})]})}),(0,x.jsxs)(H.c,{children:[(0,x.jsx)(d.c,{type:"button",color:"link",onClick:this.toggle,children:e("Close")}),(0,x.jsx)(d.c,{type:"button",color:"primary",onClick:this.createGroup,children:"Create Group"})]})]}),(0,x.jsx)("div",{className:"search-box chat-search-box",children:(0,x.jsxs)(f.c,{size:"lg",className:"bg-light rounded-lg",children:[(0,x.jsx)(d.c,{color:"link",className:"text-decoration-none text-muted pr-1",type:"button",children:(0,x.jsx)("i",{className:"ri-search-line search-icon font-size-18"})}),(0,x.jsx)(b.c,{type:"text",className:"form-control bg-light",placeholder:"\u641c\u5c0b\u8cbc\u6587"})]})})]}),(0,x.jsx)(v.c,{style:{maxHeight:"100%"},className:"p-4 chat-message-list chat-group-list",children:(0,x.jsx)(he.Consumer,{children:e=>{let{value:s,setValue:a}=e;return(0,x.jsx)(x.Fragment,{children:s.map(((e,s)=>(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,x.jsxs)(n.c,{color:"light",style:{width:"18rem"},children:[(0,x.jsx)("img",{alt:"\u7167\u7247",src:e.img}),(0,x.jsxs)(h.c,{children:[(0,x.jsx)(I.c,{tag:"h5",children:e.title}),(0,x.jsxs)(I.c,{tag:"h5",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"20px"},children:[(0,x.jsx)("i",{className:"ri-thumb-up-line",style:{margin:"0 10px",fontSize:"18px"},onClick:()=>console.log("Like!")}),(0,x.jsx)("i",{className:"ri-chat-2-line",style:{margin:"0 10px",fontSize:"18px"},onClick:()=>console.log("Comment!")}),(0,x.jsx)("i",{className:"ri-share-forward-box-line",style:{margin:"0 10px",fontSize:"18px"},onClick:()=>console.log("Share!")})]})]})]})},s)})))})}})})]})})}}const V=(0,i.Ul)((e=>{const{groups:s,active_user:a}=e.Chat;return{groups:s,active_user:a}}),{createGroup:e=>({type:y.k1,payload:e})})((0,u.AX)()(X));const W=(0,i.Ul)((e=>({...e.Layout})),null)((function(e){const s=e.activeTab;return(0,x.jsx)(t.Fragment,{children:(0,x.jsx)("div",{className:"chat-leftsidebar me-lg-1",children:(0,x.jsxs)(l.c,{activeTab:s,children:[(0,x.jsx)(c.c,{tabId:"profile",id:"pills-user",children:(0,x.jsx)(N,{})}),(0,x.jsx)(c.c,{tabId:"chat",id:"pills-chat",children:(0,x.jsx)(U,{recentChatList:e.recentChatList})}),(0,x.jsx)(c.c,{tabId:"group",id:"pills-groups",children:(0,x.jsx)(V,{})})]})})})}));var K=a(8656),J=a(6168),Q=a(1488),Y=a(5624);const Z=(0,i.Ul)((e=>{const{users:s,active_user:a}=e.Chat,{userSidebar:t}=e.Layout;return{users:s,active_user:a,userSidebar:t}}),{closeUserSidebar:C.iy})((function(e){const[s,a]=(0,t.useState)(!0),[i,l]=(0,t.useState)(!1),[c,r]=(0,t.useState)(!1),[m]=(0,t.useState)([{name:"Admin-A.zip",size:"12.5 MB",thumbnail:"ri-file-text-fill"},{name:"Image-1.jpg",size:"4.2 MB",thumbnail:"ri-image-fill"},{name:"Image-2.jpg",size:"3.1 MB",thumbnail:"ri-image-fill"},{name:"Landing-A.zip",size:"6.7 MB",thumbnail:"ri-file-text-fill"}]),{t:o}=(0,u.Gy)();return(0,x.jsx)(t.Fragment,{children:(0,x.jsxs)("div",{style:{display:!0===e.userSidebar?"block":"none"},className:"user-profile-sidebar",children:[(0,x.jsx)("div",{className:"px-3 px-lg-4 pt-3 pt-lg-4",children:(0,x.jsx)("div",{className:"user-chat-nav  text-end",children:(0,x.jsx)(d.c,{color:"none",type:"button",onClick:()=>{e.closeUserSidebar()},className:"nav-btn",id:"user-profile-hide",children:(0,x.jsx)("i",{className:"ri-close-line"})})})}),(0,x.jsxs)("div",{className:"text-center p-4 border-bottom",children:[(0,x.jsx)("div",{className:"mb-4 d-flex justify-content-center",children:"Null"===e.activeUser.profilePicture?(0,x.jsx)("div",{className:"avatar-lg",children:(0,x.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary font-size-24",children:e.activeUser.name.charAt(0)})}):(0,x.jsx)("img",{src:e.activeUser.profilePicture,className:"rounded-circle avatar-lg img-thumbnail",alt:"chatvia"})}),(0,x.jsx)("h5",{className:"font-size-16 mb-1 text-truncate",children:e.activeUser.name}),(0,x.jsxs)("p",{className:"text-muted text-truncate mb-1",children:[(()=>{switch(e.activeUser.status){case"online":return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-success me-1"})});case"away":return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-warning me-1"})});case"offline":return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-secondary me-1"})});default:return}})(),"\u5728\u7dda"]})]}),(0,x.jsxs)(v.c,{style:{maxHeight:"100%"},className:"p-4 user-profile-desc",children:[(0,x.jsx)("div",{className:"text-muted",children:(0,x.jsx)("p",{className:"mb-4",children:o("")})}),(0,x.jsxs)("div",{id:"profile-user-accordion",className:"custom-accordion",children:[(0,x.jsx)(n.c,{className:"shadow-none border mb-2",children:(0,x.jsxs)(g,{title:"\u95dc\u65bc",iconClass:"ri-user-2-line",isOpen:s,toggleCollapse:()=>{a(!s),l(!1),r(!1)},children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-muted mb-1",children:o("\u4f7f\u7528\u8005\u540d\u7a31")}),(0,x.jsx)("h5",{className:"font-size-14",children:e.activeUser.name})]}),(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsx)("p",{className:"text-muted mb-1",children:o("\u96fb\u5b50\u90f5\u4ef6")}),(0,x.jsx)("h5",{className:"font-size-14",children:"abc@gmail.com"})]}),(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsx)("p",{className:"text-muted mb-1",children:o("\u5730\u9ede")}),(0,x.jsx)("h5",{className:"font-size-14 mb-0",children:"\u53f0\u7063 \u53f0\u5317"})]})]})}),!0===e.activeUser.isGroup&&(0,x.jsx)(n.c,{className:"mb-1 shadow-none border",children:(0,x.jsxs)(g,{title:"Members",iconClass:"ri-group-line",isOpen:c,toggleCollapse:()=>{r(!c),a(!1),l(!1)},children:[(0,x.jsx)(n.c,{className:"p-2 mb-2",children:(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:" align-self-center me-3",children:(0,x.jsx)("div",{className:"avatar-xs",children:(0,x.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:"S"})})}),(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"text-left",children:(0,x.jsxs)("h5",{className:"font-size-14 mb-1",children:[o("Sera Mullar"),(0,x.jsx)(Q.c,{color:"danger",className:"badge-soft-danger float-end",children:o("Admin")})]})})})]})}),(0,x.jsx)(n.c,{className:"p-2 mb-2",children:(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"chat-user-img align-self-center me-2",children:(0,x.jsx)("div",{className:"avatar-xs",children:(0,x.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:"O"})})}),(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"text-left",children:(0,x.jsx)("h5",{className:"font-size-14 mb-1",children:o("Ossie Wilson")})})})]})}),(0,x.jsx)(n.c,{className:"p-2 mb-2",children:(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"chat-avatar",children:(0,x.jsx)("img",{src:Y,className:"rounded-circle chat-user-img avatar-xs me-3",alt:"chatvia"})}),(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"text-left",children:(0,x.jsx)("h5",{className:"font-size-14 mb-1",children:o("Paul Haynes")})})})]})})]})})]})]})]})})}));var $=a(1424),ee=a(2152),se=a(912);const ae=(0,i.Ul)((e=>{const{users:s,active_user:a}=e.Chat;return{...e.Layout,users:s,active_user:a}}),{openUserSidebar:C.SM,setFullUser:S})((function(e){const[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),[c,n]=(0,t.useState)(!1),[m,o]=(0,t.useState)(!1),h=s=>{s.preventDefault(),e.openUserSidebar()};return(0,x.jsx)(t.Fragment,{children:(0,x.jsx)("div",{className:"p-3 p-lg-4 border-bottom user-chat-topbar",children:(0,x.jsxs)($.c,{className:"align-items-center",children:[(0,x.jsx)(ee.c,{sm:4,xs:8,children:(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"d-block d-lg-none me-2 ms-0",children:(0,x.jsx)(r.cH,{to:"#",onClick:e=>function(e){e.preventDefault();var s=document.getElementsByClassName("user-chat");s&&s[0].classList.remove("user-chat-show")}(e),className:"user-chat-remove text-muted font-size-16 p-2",children:(0,x.jsx)("i",{className:"ri-arrow-left-s-line"})})}),"Null"!==e.users[e.active_user].profilePicture?(0,x.jsx)("div",{className:"me-3 ms-0",children:(0,x.jsx)("img",{src:e.users[e.active_user].profilePicture,className:"rounded-circle avatar-xs",alt:"chatvia"})}):(0,x.jsx)("div",{className:"chat-user-img align-self-center me-3",children:(0,x.jsx)("div",{className:"avatar-xs",children:(0,x.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:e.users[e.active_user].name.charAt(0)})})}),(0,x.jsx)("div",{className:"flex-grow-1 overflow-hidden",children:(0,x.jsxs)("h5",{className:"font-size-16 mb-0 text-truncate",children:[(0,x.jsx)(r.cH,{to:"#",onClick:e=>h(e),className:"text-reset user-profile-show",children:e.users[e.active_user].name}),(()=>{switch(e.users[e.active_user].status){case"online":return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-success d-inline-block ms-2"})});case"away":return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-warning d-inline-block ms-1"})});case"offline":return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-secondary d-inline-block ms-1"})});default:return}})()]})})]})}),(0,x.jsx)(ee.c,{sm:8,xs:4,children:(0,x.jsxs)("ul",{className:"list-inline user-chat-nav text-end mb-0",children:[(0,x.jsx)("li",{className:"list-inline-item"}),(0,x.jsx)("li",{className:"list-inline-item d-none d-lg-inline-block me-2 ms-0",children:(0,x.jsx)("button",{type:"button",onClick:()=>n(!c),className:"btn nav-btn",children:(0,x.jsx)("i",{className:"ri-phone-line"})})}),(0,x.jsx)("li",{className:"list-inline-item d-none d-lg-inline-block me-2 ms-0",children:(0,x.jsx)("button",{type:"button",onClick:()=>o(!m),className:"btn nav-btn",children:(0,x.jsx)("i",{className:"ri-vidicon-line"})})}),(0,x.jsx)("li",{className:"list-inline-item d-none d-lg-inline-block me-2 ms-0",children:(0,x.jsx)(d.c,{type:"button",color:"none",onClick:e=>h(e),className:"nav-btn user-profile-show",children:(0,x.jsx)("i",{className:"ri-user-2-line"})})}),(0,x.jsx)("li",{className:"list-inline-item",children:(0,x.jsx)(se.c,{isOpen:i,toggle:()=>l(!i)})})]})})]})})})}));var te=a(6400),ie=a(8056);a(1468);const le=function(e){const[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(null),[c]=(0,t.useState)(e.images),{t:n}=(0,u.Gy)(),d=e=>{a(!s),l(e)};return(0,x.jsx)(t.Fragment,{children:(0,x.jsxs)("ul",{className:"list-inline message-img  mb-0",children:[c.map(((e,s)=>(0,x.jsxs)("li",{className:"list-inline-item message-img-list",children:[(0,x.jsx)("div",{children:(0,x.jsx)(r.cH,{to:"#",onClick:()=>d(e.image),className:"popup-img d-inline-block m-1",title:"Project 1",children:(0,x.jsx)("img",{src:e.image,alt:"chat",className:"rounded border"})})}),(0,x.jsx)("div",{className:"message-img-link",children:(0,x.jsxs)("ul",{className:"list-inline mb-0",children:[(0,x.jsx)("li",{className:"list-inline-item",children:(0,x.jsx)(r.cH,{to:"#"})}),(0,x.jsx)(K.c,{tag:"li",className:"list-inline-item",children:(0,x.jsx)(te.c,{tag:"a"})})]})})]},s))),s&&(0,x.jsx)(ie.c,{mainSrc:i,onCloseRequest:d,imageTitle:"\u7167\u7247"})]})})};var ce=a(2048);a(2428);const re=function(e){const[s,a]=(0,t.useState)(""),[i,l]=(0,t.useState)(!1),[c,r]=(0,t.useState)({name:"",size:""}),[n,m]=(0,t.useState)("");return(0,t.useEffect)((()=>{a(e.textMessage)}),[e.textMessage]),(0,x.jsx)(t.Fragment,{children:(0,x.jsx)("div",{className:"chat-input-section p-3 p-lg-4 border-top mb-0 ",children:(0,x.jsx)(P.c,{onSubmit:t=>((s,t)=>{s.preventDefault(),e.canClick&&(""!==t&&(e.onaddMessage(t,"textMessage"),a("")),""!==c.name&&(e.onaddMessage(c,"fileMessage"),r({name:"",size:""})),""!==n&&(e.onaddMessage(n,"imageMessage"),m("")))})(t,s),children:(0,x.jsxs)($.c,{className:"g-0",children:[(0,x.jsx)(ee.c,{children:(0,x.jsx)("div",{children:(0,x.jsx)(b.c,{type:"text",value:s,onChange:e=>{a(e.target.value)},className:"form-control form-control-lg bg-light border-light",placeholder:"\u8f38\u5165\u8a0a\u606f",readOnly:!0})})}),(0,x.jsx)(ee.c,{xs:"auto",children:(0,x.jsx)("div",{className:"chat-input-links ms-md-2",children:(0,x.jsxs)("ul",{className:"list-inline mb-0 ms-0",children:[(0,x.jsxs)("li",{className:"list-inline-item input-file",children:[(0,x.jsxs)(q.c,{id:"images",className:"me-1 btn btn-link text-decoration-none font-size-16 btn-lg waves-effect",children:[(0,x.jsx)("i",{className:"ri-image-fill"}),(0,x.jsx)(b.c,{onChange:e=>(e=>{0!==e.target.files.length&&m(URL.createObjectURL(e.target.files[0]))})(e),accept:"image/*",type:"file",name:"fileInput",size:"60"})]}),(0,x.jsx)(ce.c,{target:"images",placement:"top",children:"\u7167\u7247"})]}),(0,x.jsx)("li",{className:"list-inline-item",children:(0,x.jsx)(d.c,{type:"submit",color:"primary",className:"font-size-16 btn-lg chat-send waves-effect waves-light",children:(0,x.jsx)("i",{className:"ri-send-plane-2-fill"})})})]})})})]})})})})};var ne=a(9072),de=a.n(ne);const me=function(e){const{t:s}=(0,u.Gy)(),[a,i]=(0,t.useState)(!1),[l]=(0,t.useState)(e.video);return(0,t.useEffect)((()=>{console.log(e.video)}),[]),(0,x.jsxs)(t.Fragment,{children:[(0,x.jsx)(n.c,{className:"p-2 mb-2",onClick:()=>{i(!a),console.log(l)},children:(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"avatar-sm me-3 ms-0",children:(0,x.jsx)("div",{className:"avatar-title bg-primary-subtle text-primary rounded font-size-20",children:(0,x.jsx)("i",{class:"ri-live-fill"})})}),(0,x.jsx)("div",{className:"flex-grow-1",children:(0,x.jsx)("div",{className:"text-start",children:(0,x.jsx)("h5",{className:"font-size-14 mb-1",children:e.video[0].videoName})})})]})}),(0,x.jsx)(de(),{toggler:a,sources:[e.video[0].video]})]})};const oe=(0,J.c)((0,i.Ul)((e=>{const{active_user:s}=e.Chat,{userSidebar:a}=e.Layout,{activeTab:t}=e.Layout;return{active_user:s,userSidebar:a,activeTab:t}}),{openUserSidebar:C.SM,setFullUser:S,setActiveTab:C.iD})((function(e){var s;const a=(0,t.useRef)(),[i,l]=(0,t.useState)(!1),{value:c,setValue:r,proFile:n,setProFile:m}=(0,t.useContext)(he),{t:o}=(0,u.Gy)(),[g]=(0,t.useState)(e.recentChatList),[p,N]=(0,t.useState)([]),[f,b]=(0,t.useState)({}),[C,y]=(0,t.useState)(""),[S,z]=(0,t.useState)({}),[k,w]=(0,t.useState)(!0),[F,L]=(0,t.useState)(!0),[M,T]=(0,t.useState)(0),[U,P]=(0,t.useState)([]);(0,t.useEffect)((()=>{a.current.recalculate(),a.current.el&&(a.current.getScrollElement().scrollTop=a.current.getScrollElement().scrollHeight)}),[e.active_user,e.recentChatList]),(0,t.useEffect)((()=>{b([...e.recentChatList.map((e=>e.messages))]),z((s=>{let a={};return e.recentChatList.forEach(((e,s)=>{a[s]=0})),a}));let s=[];e.recentChatList.forEach(((e,a)=>{let t=e.messages.map((e=>e.questions));t=t.filter(((e,s)=>isFinite(e)&&t.findIndex((s=>e===s))===s)),s.push(t.map((e=>({user:a,question:e}))))})),P([...[].concat.apply([],s)]);let a=[...g];a.forEach(((e,t)=>{t===[...[].concat.apply([],s)].find((e=>0===e.question)).user?(a[t].messages=[e.messages[0]],a[t].unRead=1):a[t].messages=[]})),e.setFullUser(a)}),[]),(0,t.useEffect)((()=>{y(""),w(!0)}),[e.active_user]),(0,t.useEffect)((()=>{var s;if(k&&void 0!==S[e.active_user]&&void 0!==f[e.active_user]&&S[e.active_user]<(null===(s=f[e.active_user])||void 0===s?void 0:s.length)){var a,t;let s=null===(a=f[e.active_user])||void 0===a?void 0:a.find(((s,a)=>"sender"===s.userType&&S[e.active_user]<a));if(null!==(t=f[e.active_user][(null===s||void 0===s?void 0:s.id)-2])&&void 0!==t&&t.isanswer?L(!1):L(!0),null!==s&&void 0!==s&&s.questions&&(null===s||void 0===s?void 0:s.questions)!==M||y(null===s||void 0===s?void 0:s.message),null!==s&&void 0!==s&&s.id)if(f[e.active_user].filter(((e,a)=>a<(null===s||void 0===s?void 0:s.id)-1)).length===e.recentChatList[e.active_user].messages.length){let a=[...g];a[e.active_user].messages=[...f[e.active_user].filter(((e,a)=>a<(null===s||void 0===s?void 0:s.id)-1&&(!e.questions||M>=e.questions)))],e.setFullUser(a)}else D(null===s||void 0===s?void 0:s.id,e.active_user);else D(f[e.active_user].length,e.active_user);w(!1)}}),[S,k,e.active_user]);const q=()=>l(!i),D=(s,a)=>{let t=S[a]+1;const i=()=>{setTimeout((()=>{let l=[...g];l[a].messages=[...f[a].filter(((e,s)=>s<t&&(!e.questions||M>=e.questions)))],e.setFullUser(l),t++,t<s&&i()}),1e3)};i()},I=(s,a)=>{let t=S[a]+1;const i=()=>{setTimeout((()=>{let l=[...g],c=f[a].filter(((e,s)=>s<t&&(!e.questions||M+1>=e.questions)));l[a].unRead=c.length-l[a].messages.length,l[a].messages=[...c],e.setFullUser(l),t++,t<s&&i()}),1e3)};i()},A=(s,t)=>{var i;var l=(new Date).getSeconds();switch(t){case"textMessage":({id:p.length+1,message:s,time:"00:"+l,userType:"sender",image:_,isFileMessage:!1,isImageMessage:!1});break;case"fileMessage":({id:p.length+1,message:"file",fileMessage:s.name,size:s.size,time:"00:"+l,userType:"sender",image:_,isFileMessage:!0,isImageMessage:!1});break;case"imageMessage":var c=[{image:s}];({id:p.length+1,message:"image",imageMessage:c,size:s.size,time:"00:"+l,userType:"sender",image:_,isImageMessage:!0,isFileMessage:!1})}let r=null===(i=f[e.active_user])||void 0===i?void 0:i.find(((s,a)=>"sender"===s.userType&&S[e.active_user]<a));if(z((s=>{var a;return s[e.active_user]=null!==r&&void 0!==r&&r.id?(null===r||void 0===r?void 0:r.id)-1:null===(a=f[e.active_user])||void 0===a?void 0:a.length,{...s}})),"\u540c\u610f"===C){let s=[...g];s[e.active_user].messages=[...f[e.active_user].filter(((s,a)=>a<S[e.active_user]+1))],e.setFullUser(s),R(U.find((e=>e.question===M+1)).user),T((e=>e+1))}else if("\u78ba\u5b9a\u767c\u4f48"===C){let s=[...g];s[e.active_user].messages=[...f[e.active_user].filter(((s,a)=>a<S[e.active_user]+1))],e.setFullUser(s),e.setActiveTab("group"),R(U.find((e=>e.question===M+1)).user),T((e=>e+1))}else w(!0);a.current.el&&(a.current.getScrollElement().scrollTop=a.current.getScrollElement().scrollHeight)},R=s=>{var a,t;let i=null===(a=f[s])||void 0===a?void 0:a.find(((e,a)=>"sender"===e.userType&&S[s]<a));if(null!==(t=f[s][(null===i||void 0===i?void 0:i.id)-2])&&void 0!==t&&t.isanswer?L(!1):L(!0),null!==i&&void 0!==i&&i.id)if(f[s].filter(((e,s)=>s<(null===i||void 0===i?void 0:i.id)-1)).length===e.recentChatList[s].messages.length){let a=[...g],t=f[s].filter(((e,s)=>s<(null===i||void 0===i?void 0:i.id)-1&&(!e.questions||M+1>=e.questions)));a[s].unRead=t.length-a[s].messages.length,a[s].messages=[...t],e.setFullUser(a)}else I(null===i||void 0===i?void 0:i.id,s);else I(f[s].length,s)};return(0,x.jsx)(t.Fragment,{children:(0,x.jsx)("div",{className:"user-chat w-100 overflow-hidden",children:(0,x.jsxs)("div",{className:"d-lg-flex",children:[(0,x.jsxs)("div",{className:e.userSidebar?"w-70 overflow-hidden position-relative":"w-100 overflow-hidden position-relative",children:[(0,x.jsx)(ae,{}),(0,x.jsx)(v.c,{style:{maxHeight:"100%"},ref:a,className:"chat-conversation p-5 p-lg-4",id:"messages",children:(0,x.jsx)("ul",{className:"list-unstyled mb-0",children:null===(s=e.recentChatList[e.active_user])||void 0===s?void 0:s.messages.map(((s,a)=>s.isToday&&!0===s.isToday?(0,x.jsx)("li",{children:(0,x.jsx)("div",{className:"chat-day-title",children:(0,x.jsx)("span",{className:"title",children:"\u4eca\u5929"})})},"dayTitle"+a):!0===e.recentChatList[e.active_user].isGroup?(0,x.jsx)("li",{className:"sender"===s.userType?"right":"",children:(0,x.jsxs)("div",{className:"conversation-list",children:[(0,x.jsx)("div",{className:"chat-avatar",children:"sender"===s.userType?(0,x.jsx)("img",{src:j,alt:"chatvia"}):"Null"===e.recentChatList[e.active_user].profilePicture?(0,x.jsx)("div",{className:"chat-user-img align-self-center me-3",children:(0,x.jsx)("div",{className:"avatar-xs",children:(0,x.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:s.userName&&s.userName.charAt(0)})})}):(0,x.jsx)("img",{src:e.recentChatList[e.active_user].profilePicture,alt:"chatvia"})}),(0,x.jsxs)("div",{className:"user-chat-content",children:[(0,x.jsxs)("div",{className:"ctext-wrap",children:[(0,x.jsxs)("div",{className:"ctext-wrap-content",children:[s.message&&(0,x.jsx)("p",{className:"mb-0",children:s.message}),s.imageMessage&&(0,x.jsx)(le,{images:s.imageMessage}),s.fileMessage&&(0,x.jsx)(me,{video:s.fileMessage,fileSize:s.size}),s.isTyping&&(0,x.jsxs)("p",{className:"mb-0",children:["typing",(0,x.jsxs)("span",{className:"animate-typing",children:[(0,x.jsx)("span",{className:"dot ms-1"}),(0,x.jsx)("span",{className:"dot ms-1"}),(0,x.jsx)("span",{className:"dot ms-1"})]})]}),!s.isTyping&&(0,x.jsxs)("p",{className:"chat-time mb-0",children:[(0,x.jsx)("i",{className:"ri-time-line align-middle"})," ",(0,x.jsx)("span",{className:"align-middle",children:s.time})]})]}),!s.isTyping&&(0,x.jsx)(K.c,{className:"align-self-start"})]}),(0,x.jsx)("div",{className:"conversation-name",children:"sender"===s.userType?"Patricia Smith":s.userName})]})]})},a):a>S[e.active_user]&&s.isanswer?(0,x.jsx)("li",{onClick:()=>(s=>{var a,t,i;A("","");let l=[{img:"",title:"",video:""},...c],d=null===(a=f[e.active_user].filter((e=>e.questions===s.questions)).find((e=>e.imageMessage&&!e.isanswer)))||void 0===a||null===(t=a.imageMessage)||void 0===t||null===(i=t.find((e=>e)))||void 0===i?void 0:i.image,o={...n};Object.keys(s.isanswer).forEach((e=>{"badge"===e?(void 0===o[e]&&(o[e]={}),void 0!==o[e][s.isanswer[e]]?o[e]["".concat(s.isanswer[e])]+=1:o[e]["".concat(s.isanswer[e])]=1):s.isanswer[e]&&(o[e]=void 0!==o[e]?o[e]:("credit"===e?10:0)+s.isanswer[e])})),m(o),void 0!==d&&(l[l.length-s.questions].img=d),l[l.length-s.questions].title="",s.answerImg?l[l.length-s.questions].img=s.answerImg.find((e=>e)).image:s.answerFile?l[l.length-s.questions].video=s.answerFile.find((e=>e)).video:l[l.length-s.questions].title=s.message,r(l)})(s),className:"sender"===s.userType?"right":"",children:(0,x.jsxs)("div",{className:"conversation-list",children:[p[a+1]&&p[a].userType===p[a+1].userType?(0,x.jsx)("div",{className:"chat-avatar",children:(0,x.jsx)("div",{className:"blank-div"})}):(0,x.jsx)("div",{className:"chat-avatar",children:"sender"===s.userType?(0,x.jsx)("img",{src:j,alt:"chatvia"}):"Null"===e.recentChatList[e.active_user].profilePicture?(0,x.jsx)("div",{className:"chat-user-img align-self-center me-3",children:(0,x.jsx)("div",{className:"avatar-xs",children:(0,x.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:e.recentChatList[e.active_user].name.charAt(0)})})}):(0,x.jsx)("img",{src:e.recentChatList[e.active_user].profilePicture,alt:"chatvia"})}),(0,x.jsxs)("div",{className:"user-chat-content",children:[(0,x.jsxs)("div",{className:"ctext-wrap",children:[(0,x.jsxs)("div",{className:"ctext-wrap-content",children:[s.message&&(0,x.jsx)("p",{className:"mb-0",children:s.message}),s.imageMessage&&(0,x.jsx)(le,{images:s.imageMessage}),s.fileMessage&&(0,x.jsx)(me,{video:s.fileMessage}),s.isTyping&&(0,x.jsxs)("p",{className:"mb-0",children:["typing",(0,x.jsxs)("span",{className:"animate-typing",children:[(0,x.jsx)("span",{className:"dot ms-1"}),(0,x.jsx)("span",{className:"dot ms-1"}),(0,x.jsx)("span",{className:"dot ms-1"})]})]}),!s.isTyping&&(0,x.jsxs)("p",{className:"chat-time mb-0",children:[(0,x.jsx)("i",{className:"ri-time-line align-middle"})," ",(0,x.jsx)("span",{className:"align-middle",children:s.time})]})]}),!s.isTyping&&(0,x.jsx)(K.c,{className:"align-self-start ms-1"})]}),p[a+1]&&p[a].userType===p[a+1].userType?null:(0,x.jsx)("div",{className:"conversation-name",children:"sender"===s.userType?localStorage.getItem("username"):e.recentChatList[e.active_user].name})]})]})},a):(0,x.jsx)("li",{className:"sender"===s.userType?"right":"",children:(0,x.jsxs)("div",{className:"conversation-list",children:[p[a+1]&&p[a].userType===p[a+1].userType?(0,x.jsx)("div",{className:"chat-avatar",children:(0,x.jsx)("div",{className:"blank-div"})}):(0,x.jsx)("div",{className:"chat-avatar",children:"sender"===s.userType?(0,x.jsx)("img",{src:j,alt:"chatvia"}):"Null"===e.recentChatList[e.active_user].profilePicture?(0,x.jsx)("div",{className:"chat-user-img align-self-center me-3",children:(0,x.jsx)("div",{className:"avatar-xs",children:(0,x.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:e.recentChatList[e.active_user].name.charAt(0)})})}):(0,x.jsx)("img",{src:e.recentChatList[e.active_user].profilePicture,alt:"chatvia"})}),(0,x.jsxs)("div",{className:"user-chat-content",children:[(0,x.jsxs)("div",{className:"ctext-wrap",children:[(0,x.jsxs)("div",{className:"ctext-wrap-content",children:[s.message&&(0,x.jsx)("p",{className:"mb-0",children:s.message}),s.imageMessage&&(0,x.jsx)(le,{images:s.imageMessage}),s.fileMessage&&(0,x.jsx)(me,{video:s.fileMessage,fileSize:s.size}),s.isTyping&&(0,x.jsxs)("p",{className:"mb-0",children:["typing",(0,x.jsxs)("span",{className:"animate-typing",children:[(0,x.jsx)("span",{className:"dot ms-1"}),(0,x.jsx)("span",{className:"dot ms-1"}),(0,x.jsx)("span",{className:"dot ms-1"})]})]}),!s.isTyping&&(0,x.jsxs)("p",{className:"chat-time mb-0",children:[(0,x.jsx)("i",{className:"ri-time-line align-middle"})," ",(0,x.jsx)("span",{className:"align-middle",children:s.time})]})]}),!s.isTyping&&(0,x.jsx)(K.c,{className:"align-self-start ms-1"})]}),p[a+1]&&p[a].userType===p[a+1].userType?null:(0,x.jsx)("div",{className:"conversation-name",children:"sender"===s.userType?localStorage.getItem("username"):e.recentChatList[e.active_user].name})]})]})},a)))})}),(0,x.jsxs)(O.c,{backdrop:"static",isOpen:i,centered:!0,toggle:q,children:[(0,x.jsx)(G.c,{toggle:q,children:"Forward to..."}),(0,x.jsx)(E.c,{children:(0,x.jsxs)(h.c,{className:"p-2",children:[(0,x.jsx)(v.c,{style:{maxHeight:"200px"},children:(0,x.jsx)(B,{handleCheck:()=>{}})}),(0,x.jsx)(H.c,{className:"border-0",children:(0,x.jsx)(d.c,{color:"primary",children:"Forward"})})]})})]}),(0,x.jsx)(re,{onaddMessage:A,canClick:F,textMessage:C})]}),(0,x.jsx)(Z,{activeUser:e.recentChatList[e.active_user]})]})})})}))),he=t.createContext();class ue extends t.Component{constructor(){super(...arguments),this.state={value:[],proFile:{}},this.setValue=e=>{this.setState((s=>({value:e})))},this.setProFile=e=>{this.setState((s=>({proFile:e})))}}render(){const{value:e,proFile:s}=this.state,{setValue:a,setProFile:i}=this;return document.title="\u804a\u5929\u5ba4 | \u5047\u65b0\u805e\u80a1\u4efd\u6709\u9650\u516c\u53f8",(0,x.jsx)(t.Fragment,{children:(0,x.jsxs)(he.Provider,{value:{value:e,setValue:a,proFile:s,setProFile:i},children:[(0,x.jsx)(W,{recentChatList:this.props.users}),(0,x.jsx)(oe,{recentChatList:this.props.users})]})})}}const xe=(0,i.Ul)((e=>{const{users:s}=e.Chat;return{users:s}}),{})(ue)}}]);