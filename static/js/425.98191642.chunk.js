"use strict";(self.webpackChunkfakenewsgame=self.webpackChunkfakenewsgame||[]).push([[425],{9128:(e,s,a)=>{a.d(s,{c:()=>m});var t=a(9584),i=a(7572),l=a(3813),c=a(6492),r=a(6940),n=a(6596),d=a(7884);const m=function(e){const{isOpen:s,toggleCollapse:a}=e,{t:m}=(0,n.Gy)();return(0,d.jsxs)(t.Fragment,{children:[(0,d.jsx)(r.cH,{to:"#",onClick:a,className:"text-dark",children:(0,d.jsx)(i.c,{id:"profile-user-headingOne",children:(0,d.jsxs)("h5",{className:"font-size-14 m-0",children:[e.iconClass&&(0,d.jsx)("i",{className:e.iconClass+" me-2 align-middle d-inline-block"}),m(e.title),(0,d.jsx)("i",{className:s?"mdi mdi-chevron-up float-end accor-plus-icon":"mdi mdi-chevron-down float-end accor-plus-icon"})]})})}),(0,d.jsx)(l.c,{isOpen:s,children:(0,d.jsx)(c.c,{children:e.children})})]})}},196:(e,s,a)=>{a.r(s),a.d(s,{default:()=>ze});var t=a(9584),i=a(3948),l=a(4123),c=a(3032),r=a(3424),n=a(8436),d=a(9128);const m=a.p+"static/media/Fishing \uff08\u6a19\u984c\u8a87\u5927\u5fbd\u7ae0\uff09.b6a7b3f961278f0d67871d7ced90fbad.svg";var o=a(7884);const h=()=>(0,o.jsx)("img",{src:m,alt:"Fishing Icon",style:{transform:"scale(0.1)"}});const u=a.p+"static/media/from_where\uff08\u6c92\u6709\u51fa\u8655\u5fbd\u7ae0\uff09.184ed18ce5d363c8f2ea92e3e8649b5e.svg",x=()=>(0,o.jsx)("img",{src:u,alt:"Fishing Icon",style:{transform:"scale(0.07)"}}),g=a.p+"static/media/picxxxx.7d32de450b9a5274da78.png",p=()=>(0,o.jsx)("img",{src:g,alt:"Fishing Icon",style:{transform:"scale(0.1)"}});const j=a.p+"static/media/xxmatchxx\uff08\u5f71\u97f3\u548c\u6587\u5b57\u5167\u5bb9\u4e0d\u7b26\u5fbd\u7ae0\uff09.a558cbc590f7635dc7bf5eedc05cb022.svg",v=()=>(0,o.jsx)("img",{src:j,alt:"Fishing Icon",style:{transform:"scale(0.1)",marginLeft:"5px"}});const N=a.p+"static/media/emo\uff08\u60c5\u7dd2\u6027\u8a00\u8ad6\u5fbd\u7ae0\uff09.fcadd04e3f00d21ca54d29aa26198da5.svg",f=()=>(0,o.jsx)("img",{src:N,alt:"Fishing Icon",style:{transform:"scale(0.1)",marginTop:"40px",marginLeft:"5px"}});var b=a(6596);const y=function(e){const s=e.files,{t:a}=(0,b.Gy)(),i=e=>{switch(e){case"fishing":return(0,o.jsx)(h,{});case"from_where":return(0,o.jsx)(x,{});case"picxxxx":return(0,o.jsx)(p,{});case"xxmatchxx":return(0,o.jsx)(v,{});case"emo":return(0,o.jsx)(f,{});default:return null}};return(0,o.jsx)(t.Fragment,{children:s.map(((e,s)=>(0,o.jsx)(n.c,{className:"p-2 border mb-2",children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"avatar-sm me-3 ms-0",children:(0,o.jsx)("div",{className:"avatar-title bg-primary-subtle text-primary rounded font-size-20",children:i(e.id)})}),(0,o.jsx)("div",{className:"flex-grow-1 overflow-hidden",children:(0,o.jsxs)("div",{className:"text-left",children:[(0,o.jsx)("h5",{className:"font-size-14 mb-1",children:e.name}),(0,o.jsx)("p",{className:"text-muted font-size-13 mb-0",children:e.size})]})})]})},s)))})};var C=a(1368),S=a(2636),w=a(9495),k=a(2836),z=a(5032);const _=function(e){const[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!0),[c,m]=(0,t.useState)(!1),[h,u]=(0,t.useState)([{name:"Fishing \uff08\u6a19\u984c\u8a87\u5927\u5fbd\u7ae0\uff09",id:"fishing",size:"X2",thumbnail:"ri-image-fill"},{name:"from_where\uff08\u6c92\u6709\u51fa\u8655\u5fbd\u7ae0\uff09",id:"from_where",size:"X1",thumbnail:"ri-image-fill"},{name:"picxxxx\uff08\u6709\u504f\u898b\u5730\u89e3\u8b80\u5716\u8868\u5fbd\u7ae0\uff09",id:"picxxxx",size:"X3",thumbnail:"ri-image-fill"},{name:"xxmatchxx\uff08\u5047\u88dd\u642d\u914d\u76f8\u95dc\u5716\u7247\u5fbd\u7ae0\uff09",id:"xxmatchxx",size:"X3",thumbnail:"ri-image-fill"},{name:"emo\uff08\u60c5\u7dd2\u6027\u8a00\u8ad6\u5fbd\u7ae0\uff09",id:"emo",size:"X5",thumbnail:"ri-image-fill"}]),[x,g]=(0,t.useState)(0),{proFile:p}=(0,t.useContext)(z.e),[j,v]=((0,r.i6)(),(0,t.useState)("")),[N,f]=(0,t.useState)(S);(0,t.useEffect)((()=>{const e=localStorage.getItem("username");e&&v(e);const s=localStorage.getItem("headshot");f("1"===s?S:"2"===s?w:S)}),[]),(0,t.useEffect)((()=>{if(10===(null===p||void 0===p?void 0:p.anger)){let e=Object.keys(p).map((e=>"badge"!==e&&"".concat(e,"=").concat(p[e])));(null===p||void 0===p?void 0:p.badge)&&(e=[...e,...Object.keys(null===p||void 0===p?void 0:p.badge).map((e=>"".concat(e,"=").concat(p.badge[e])))].filter((e=>e))),window.location.assign("https://yuyan7498.github.io/chat-game-ending/?fail=0&".concat(e.join("&")))}g(h.map((e=>p.badge&&p.badge[e.id]?p.badge[e.id]:0)).reduce(((e,s)=>e+s))),u((e=>e.map((e=>({...e,size:"X".concat(p.badge&&p.badge[e.id]?p.badge[e.id]:0," ")})))))}),[p]);const{t:C}=(0,b.Gy)();return(0,o.jsx)(t.Fragment,{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"px-4 pt-4",children:[(0,o.jsx)("div",{className:"user-chat-nav float-end"}),(0,o.jsx)("h4",{className:"mb-0",children:C("\u6211\u7684\u500b\u4eba\u6a94\u6848")})]}),(0,o.jsxs)("div",{className:"text-center p-4 border-bottom",children:[(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("img",{src:N,className:"rounded-circle avatar-lg img-thumbnail",alt:"chatvia"})}),(0,o.jsx)("h5",{className:"font-size-16 mb-1 text-truncate",children:j}),(0,o.jsxs)("p",{className:"text-muted text-truncate mb-1",children:[(0,o.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-success me-1 d-inline-block"})," ",C("\u5728\u7dda")]})]}),(0,o.jsx)(k.c,{style:{maxHeight:"100%"},className:"p-4 user-profile-desc",children:(0,o.jsxs)("div",{className:"p-4 user-profile-desc",children:[(0,o.jsxs)("div",{className:"text-muted",children:[(0,o.jsxs)("p",{className:"mb-4",children:["\u4fe1\u7528\u5ea6\uff1a",(null===p||void 0===p?void 0:p.credit)||10,"/10"]}),(0,o.jsxs)("p",{className:"mb-4",children:["\u95dc\u6ce8\u4eba\u6578\uff1a",(null===p||void 0===p?void 0:p.followers)||0,"\u4eba"]}),(0,o.jsxs)("p",{className:"mb-4",children:["\u8001\u95c6\u6012\u6c23\u503c\uff1a",(null===p||void 0===p?void 0:p.anger)||0,"/10"]}),(0,o.jsxs)("p",{className:"mb-4",children:["\u5fbd\u7ae0\uff1a",x,"/11"]})]}),(0,o.jsxs)("div",{id:"profile-user-accordion-1",className:"custom-accordion",children:[(0,o.jsx)(n.c,{className:"shadow-none border mb-2",children:(0,o.jsxs)(d.c,{title:"\u6211\u7684\u8cc7\u6599",iconClass:"ri-user-2-line",isOpen:i,toggleCollapse:()=>{l(!i),m(!1)},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-muted mb-1",children:C("\u4f7f\u7528\u8005\u540d\u7a31")}),(0,o.jsx)("h5",{className:"font-size-14",children:j})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("p",{className:"text-muted mb-1",children:C("\u96fb\u5b50\u90f5\u4ef6")}),(0,o.jsx)("h5",{className:"font-size-14",children:C("adc@123.com")})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("p",{className:"text-muted mb-1",children:C("\u5730\u9ede")}),(0,o.jsx)("h5",{className:"font-size-14 mb-0",children:C("\u53f0\u7063")})]})]})}),(0,o.jsx)(n.c,{className:"mb-1 shadow-none border",children:(0,o.jsx)(d.c,{title:"\u5fbd\u7ae0",iconClass:"ri-attachment-line",isOpen:c,toggleCollapse:()=>{m(!c),l(!1)},children:(0,o.jsx)(y,{files:h})})})]})]})})]})})};var L=a(2596),F=a(6892),U=a(6940),T=a(7348);const M=e=>({type:T.M3,payload:e});var O=a(1296),E=a(2756),G=a.n(E),I=(a(5176),a(4868)),q=a(4732),P=a(8552),D=a(9504),A=a(5624);const H=()=>(0,o.jsx)(t.Fragment,{children:(0,o.jsx)("div",{className:"px-4 pb-4 dot_remove",dir:"ltr",children:(0,o.jsxs)(G(),{responsive:{0:{items:4},1024:{items:4}},disableDotsControls:!1,disableButtonsControls:!1,mouseTracking:!0,children:[(0,o.jsx)("div",{className:"item",children:(0,o.jsxs)(U.cH,{to:"#",className:"user-status-box",children:[(0,o.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,o.jsx)("img",{src:q,alt:"user-img",className:"img-fluid rounded-circle"}),(0,o.jsx)("span",{className:"user-status"})]}),(0,o.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"\u8001\u95c6"})]})}),(0,o.jsx)("div",{className:"item",children:(0,o.jsxs)(U.cH,{to:"#",className:"user-status-box",children:[(0,o.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,o.jsx)("img",{src:C,alt:"user-img",className:"img-fluid rounded-circle"}),(0,o.jsx)("span",{className:"user-status"})]}),(0,o.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"fish\ud83d\udc1f"})]})}),(0,o.jsx)("div",{className:"item",children:(0,o.jsxs)(U.cH,{to:"#",className:"user-status-box",children:[(0,o.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,o.jsx)("img",{src:I,alt:"user-img",className:"img-fluid rounded-circle"}),(0,o.jsx)("span",{className:"user-status"})]}),(0,o.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"from_where"})]})}),(0,o.jsx)("div",{className:"item",children:(0,o.jsxs)(U.cH,{to:"#",className:"user-status-box",children:[(0,o.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,o.jsx)("img",{src:D,alt:"user-img",className:"img-fluid rounded-circle"}),(0,o.jsx)("span",{className:"user-status"})]}),(0,o.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"Picxxxx"})]})}),(0,o.jsx)("div",{className:"item",children:(0,o.jsxs)(U.cH,{to:"#",className:"user-status-box",children:[(0,o.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,o.jsx)("img",{src:A,alt:"user-img",className:"img-fluid rounded-circle"}),(0,o.jsx)("span",{className:"user-status"})]}),(0,o.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"xxmatchxx"})]})}),(0,o.jsx)("div",{className:"item",children:(0,o.jsxs)(U.cH,{to:"#",className:"user-status-box",children:[(0,o.jsxs)("div",{className:"avatar-xs mx-auto d-block chat-user-img online",children:[(0,o.jsx)("img",{src:P,alt:"user-img",className:"img-fluid rounded-circle"}),(0,o.jsx)("span",{className:"user-status"})]}),(0,o.jsx)("h5",{className:"font-size-13 text-truncate mt-3 mb-1",children:"Emo\ud83d\ude12"})]})})]})})});class R extends t.Component{constructor(e){super(e),this.state={searchChat:"",recentChatList:e.recentChatList},this.openUserChat=this.openUserChat.bind(this),this.handleChange=this.handleChange.bind(this)}componentDidMount(){var e=document.getElementById("conversation"+this.props.active_user);e&&e.classList.add("active")}componentDidUpdate(e){e!==this.props&&this.setState({recentChatList:this.props.recentChatList})}UNSAFE_componentWillReceiveProps(e){this.props.recentChatList!==e.recentChatList&&this.setState({recentChatList:e.recentChatList})}handleChange(e){this.setState({searchChat:e.target.value});var s=e.target.value;let a=this.state.recentChatList,t=[];for(let i=0;i<a.length;i++)(a[i].name.toLowerCase().includes(s)||a[i].name.toUpperCase().includes(s))&&t.push(a[i]);this.setState({recentChatList:t}),""===s&&this.setState({recentChatList:this.props.recentChatList})}openUserChat(e,s){e.preventDefault();var a=this.props.recentChatList.indexOf(s);this.props.activeUser(a);var t=document.getElementById("chat-list"),i=e.target,l=null;if(t){for(var c=t.getElementsByTagName("li"),r=0;r<c.length;++r)c[r].classList.contains("active")&&c[r].classList.remove("active");for(var n=0;n<c.length;++n)if(c[n].contains(i)){l=c[n];break}}l&&l.classList.add("active");var d=document.getElementsByClassName("user-chat");d&&d[0].classList.add("user-chat-show");var m=document.getElementById("unRead"+s.id);if(m){let e=[...this.state.recentChatList];e[s.id].unRead=0,M(e),m.style.display="none"}}render(){return(0,o.jsx)(t.Fragment,{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"px-4 pt-4",children:[(0,o.jsx)("h4",{className:"mb-4",children:"\u804a\u5929\u5ba4"}),(0,o.jsx)("div",{className:"search-box chat-search-box",children:(0,o.jsxs)(L.c,{className:"mb-3 rounded-3",children:[(0,o.jsx)("span",{className:"input-group-text text-muted bg-light pe-1 ps-3",id:"basic-addon1",children:(0,o.jsx)("i",{className:"ri-search-line search-icon font-size-18"})}),(0,o.jsx)(F.c,{type:"text",value:this.state.searchChat,onChange:e=>this.handleChange(e),className:"form-control bg-light",placeholder:"\u641c\u5c0b\u4f7f\u7528\u8005"})]})})]}),(0,o.jsx)(H,{}),(0,o.jsx)("div",{children:(0,o.jsx)(k.c,{className:"chat-message-list",children:(0,o.jsx)("ul",{className:"list-unstyled chat-list chat-user-list px-2",id:"chat-list",children:this.state.recentChatList.map(((e,s)=>(0,o.jsx)("li",{id:"conversation"+s,className:e.unRead?"unread":e.isTyping?"typing":s===this.props.active_user?"active":"",children:(0,o.jsx)(U.cH,{to:"#",onClick:s=>this.openUserChat(s,e),children:(0,o.jsxs)("div",{className:"d-flex",children:["Null"===e.profilePicture?(0,o.jsxs)("div",{className:"chat-user-img "+e.status+" align-self-center ms-0",children:[(0,o.jsx)("div",{className:"avatar-xs",children:(0,o.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:e.name.charAt(0)})}),e.status&&(0,o.jsx)("span",{className:"user-status"})]}):(0,o.jsxs)("div",{className:"chat-user-img "+e.status+" align-self-center ms-0",children:[(0,o.jsx)("img",{src:e.profilePicture,className:"rounded-circle avatar-xs"}),e.status&&(0,o.jsx)("span",{className:"user-status"})]}),(0,o.jsxs)("div",{className:"flex-grow-1 overflow-hidden",children:[(0,o.jsx)("h5",{className:"text-truncate font-size-15 mb-1 ms-3",children:e.name}),(0,o.jsx)("p",{className:"chat-user-message font-size-14 text-truncate mb-0 ms-3",children:e.isTyping?(0,o.jsxs)(o.Fragment,{children:["typing",(0,o.jsxs)("span",{className:"animate-typing",children:[(0,o.jsx)("span",{className:"dot ms-1"}),(0,o.jsx)("span",{className:"dot ms-1"}),(0,o.jsx)("span",{className:"dot ms-1"})]})]}):(0,o.jsxs)(o.Fragment,{children:[e.messages&&e.messages.length>0&&!0===e.messages[e.messages.length-1].isImageMessage?(0,o.jsx)("i",{className:"ri-image-fill align-middle me-1"}):null,e.messages&&e.messages.length>0&&!0===e.messages[e.messages.length-1].isFileMessage?(0,o.jsx)("i",{className:"ri-file-text-fill align-middle me-1"}):null,e.messages&&e.messages.length>0?e.messages[e.messages.length-1].message:null]})})]}),(0,o.jsx)("div",{className:"font-size-11",children:e.messages&&e.messages.length>0?e.messages[e.messages.length-1].time:null}),0===e.unRead?null:(0,o.jsx)("div",{className:"unread-message",id:"unRead"+e.id,children:(0,o.jsx)("span",{className:"badge badge-soft-danger rounded-pill",children:e.messages&&e.messages.length>0?e.unRead>=20?e.unRead+"+":e.unRead:""})})]})})},s)))})})})]})})}}const B=(0,i.Ul)((e=>{const{active_user:s}=e.Chat;return{active_user:s}}),{setconversationNameInOpenChat:O.uK,activeUser:e=>({type:T.AO,payload:e}),setFullUser:M})(R);var X=a(8544),W=a(9397),V=a(7924),K=a(664),J=a(6896),Q=a(1704),Y=a(8500),Z=a(3813),$=a(7572),ee=a(6492),se=a(96),ae=a(9016);let te=[{group:"A",children:[{id:0,name:"Demo"}]}];class ie extends t.Component{constructor(e){super(e),this.state={contacts:this.props.contacts},this.sortContact=this.sortContact.bind(this)}componentDidUpdate(e){e!==this.props&&this.setState({contacts:this.props.contacts})}sortContact(){let e=this.state.contacts.reduce(((e,s)=>{try{let a=s.name[0];e[a]?e[a].children.push(s):e[a]={group:a,children:[s]}}catch(a){return te}return e}),{}),s=Object.values(e);return this.setState({contacts:s}),te=s,s}componentDidMount(){this.sortContact()}componentWillUnmount(){this.sortContact()}render(){return(0,o.jsx)(t.Fragment,{children:te.map(((e,s)=>(0,o.jsxs)("div",{children:["``  ",(0,o.jsx)("div",{className:"p-3 font-weight-bold text-primary",children:e.group}),(0,o.jsx)("ul",{className:"list-unstyled contact-list",children:e.children.map(((e,s)=>(0,o.jsx)("li",{children:(0,o.jsxs)("div",{className:"form-check",children:[(0,o.jsx)(F.c,{type:"checkbox",className:"form-check-input",onChange:s=>this.props.handleCheck(s,e.id),id:"memberCheck"+e.id,value:e.name}),(0,o.jsx)(J.c,{className:"form-check-label",htmlFor:"memberCheck"+e.id,children:e.name})]})},s)))})]},s)))})}}const le=(0,i.Ul)((e=>{const{contacts:s}=e.Chat;return{contacts:s}}),{})(ie);class ce extends t.Component{constructor(e){super(e),this.state={modal:!1,isOpenCollapse:!1,groups:this.props.groups,selectedContact:[],isOpenAlert:!1,message:"",groupName:"",groupDesc:""},this.toggle=this.toggle.bind(this),this.toggleCollapse=this.toggleCollapse.bind(this),this.createGroup=this.createGroup.bind(this),this.handleCheck=this.handleCheck.bind(this),this.handleChangeGroupName=this.handleChangeGroupName.bind(this),this.handleChangeGroupDesc=this.handleChangeGroupDesc.bind(this)}toggle(){this.setState({modal:!this.state.modal})}toggleCollapse(){this.setState({isOpenCollapse:!this.state.isOpenCollapse})}componentDidUpdate(e){e!==this.props&&this.setState({groups:this.props.groups})}createGroup(){if(this.state.selectedContact.length>2){var e={gourpId:this.state.groups.length+1,name:"#"+this.state.groupName,profilePicture:"Null",isGroup:!0,unRead:0,isNew:!0,desc:this.state.groupDesc,members:this.state.selectedContact};this.props.createGroup(e),this.toggle()}else 1===this.state.selectedContact.length?this.setState({message:"Minimum 2 members required!!!",isOpenAlert:!0}):this.setState({message:"Please Select Members!!!",isOpenAlert:!0});setTimeout(function(){this.setState({isOpenAlert:!1})}.bind(this),3e3)}handleCheck(e,s){var a,t=this.state.selectedContact;e.target.checked&&(a={id:s,name:e.target.value},t.push(a),this.setState({selectedContact:t}))}handleChangeGroupName(e){this.setState({groupName:e.target.value})}handleChangeGroupDesc(e){this.setState({groupDesc:e.target.value})}render(){const{t:e}=this.props;return(0,o.jsx)(t.Fragment,{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h4",{className:"mb-4",children:e("\u8cbc\u6587")}),(0,o.jsxs)(X.c,{isOpen:this.state.modal,centered:!0,toggle:this.toggle,children:[(0,o.jsx)(W.c,{tag:"h5",className:"modal-title font-size-14",toggle:this.toggle,children:e("Create New Group")}),(0,o.jsx)(V.c,{className:"p-4",children:(0,o.jsxs)(K.c,{children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(J.c,{className:"form-label",htmlFor:"addgroupname-input",children:e("Group Name")}),(0,o.jsx)(F.c,{type:"text",className:"form-control",id:"addgroupname-input",value:this.state.groupName,onChange:e=>this.handleChangeGroupName(e),placeholder:"Enter Group Name"})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(J.c,{className:"form-label",children:e("Group Members")}),(0,o.jsx)(Q.c,{isOpen:this.state.isOpenAlert,color:"danger",children:this.state.message}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)(Y.c,{color:"light",size:"sm",type:"button",onClick:this.toggleCollapse,children:e("Select Members")})}),(0,o.jsx)(Z.c,{isOpen:this.state.isOpenCollapse,id:"groupmembercollapse",children:(0,o.jsxs)(n.c,{className:"border",children:[(0,o.jsx)($.c,{children:(0,o.jsx)("h5",{className:"font-size-15 mb-0",children:e("Contacts")})}),(0,o.jsx)(ee.c,{className:"p-2",children:(0,o.jsx)(k.c,{style:{maxHeight:"150px"},children:(0,o.jsx)("div",{id:"addContacts",children:(0,o.jsx)(le,{handleCheck:this.handleCheck})})})})]})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(J.c,{className:"form-label",htmlFor:"addgroupdescription-input",children:"Description"}),(0,o.jsx)("textarea",{className:"form-control",id:"addgroupdescription-input",value:this.state.groupDesc,onChange:e=>this.handleChangeGroupDesc(e),rows:"3",placeholder:"Enter Description"})]})]})}),(0,o.jsxs)(se.c,{children:[(0,o.jsx)(Y.c,{type:"button",color:"link",onClick:this.toggle,children:e("Close")}),(0,o.jsx)(Y.c,{type:"button",color:"primary",onClick:this.createGroup,children:"Create Group"})]})]}),(0,o.jsx)("div",{className:"search-box chat-search-box",children:(0,o.jsxs)(L.c,{size:"lg",className:"bg-light rounded-lg",children:[(0,o.jsx)(Y.c,{color:"link",className:"text-decoration-none text-muted pr-1",type:"button",children:(0,o.jsx)("i",{className:"ri-search-line search-icon font-size-18"})}),(0,o.jsx)(F.c,{type:"text",className:"form-control bg-light",placeholder:"\u641c\u5c0b\u8cbc\u6587"})]})})]}),(0,o.jsx)(k.c,{style:{maxHeight:"100%"},className:"p-4 chat-message-list chat-group-list",children:(0,o.jsx)(z.e.Consumer,{children:e=>{let{value:s,setValue:a}=e;return(0,o.jsx)(o.Fragment,{children:s.map(((e,s)=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,o.jsxs)(n.c,{color:"light",style:{width:"18rem"},children:[e.video?(0,o.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,style:{width:"100%",height:"auto"},children:(0,o.jsx)("source",{src:e.video,type:"video/mp4"})}):(0,o.jsx)("img",{alt:"\u7167\u7247",src:e.img}),(0,o.jsxs)(ee.c,{children:[(0,o.jsx)(ae.c,{tag:"h5",children:e.title}),(0,o.jsxs)(ae.c,{tag:"h5",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"20px"},children:[(0,o.jsx)("i",{className:"ri-thumb-up-line",style:{margin:"0 10px",fontSize:"18px"},onClick:()=>console.log("Like!")}),(0,o.jsx)("i",{className:"ri-chat-2-line",style:{margin:"0 10px",fontSize:"18px"},onClick:()=>console.log("Comment!")}),(0,o.jsx)("i",{className:"ri-share-forward-box-line",style:{margin:"0 10px",fontSize:"18px"},onClick:()=>console.log("Share!")})]})]})]})},s)})))})}})})]})})}}const re=(0,i.Ul)((e=>{const{groups:s,active_user:a}=e.Chat;return{groups:s,active_user:a}}),{createGroup:e=>({type:T.k1,payload:e})})((0,b.AX)()(ce));const ne=(0,i.Ul)((e=>({...e.Layout})),null)((function(e){const s=e.activeTab;return(0,o.jsx)(t.Fragment,{children:(0,o.jsx)("div",{className:"chat-leftsidebar me-lg-1",children:(0,o.jsxs)(l.c,{activeTab:s,children:[(0,o.jsx)(c.c,{tabId:"profile",id:"pills-user",children:(0,o.jsx)(_,{})}),(0,o.jsx)(c.c,{tabId:"chat",id:"pills-chat",children:(0,o.jsx)(B,{recentChatList:e.recentChatList})}),(0,o.jsx)(c.c,{tabId:"group",id:"pills-groups",children:(0,o.jsx)(re,{})})]})})})}));var de=a(8656),me=a(6168),oe=a(1488);const he=(0,i.Ul)((e=>{const{users:s,active_user:a}=e.Chat,{userSidebar:t}=e.Layout;return{users:s,active_user:a,userSidebar:t}}),{closeUserSidebar:O.iy})((function(e){const[s,a]=(0,t.useState)(!0),[i,l]=(0,t.useState)(!1),[c,r]=(0,t.useState)(!1),[m]=(0,t.useState)([{name:"Admin-A.zip",size:"12.5 MB",thumbnail:"ri-file-text-fill"},{name:"Image-1.jpg",size:"4.2 MB",thumbnail:"ri-image-fill"},{name:"Image-2.jpg",size:"3.1 MB",thumbnail:"ri-image-fill"},{name:"Landing-A.zip",size:"6.7 MB",thumbnail:"ri-file-text-fill"}]),{t:h}=(0,b.Gy)();return(0,o.jsx)(t.Fragment,{children:(0,o.jsxs)("div",{style:{display:!0===e.userSidebar?"block":"none"},className:"user-profile-sidebar",children:[(0,o.jsx)("div",{className:"px-3 px-lg-4 pt-3 pt-lg-4",children:(0,o.jsx)("div",{className:"user-chat-nav  text-end",children:(0,o.jsx)(Y.c,{color:"none",type:"button",onClick:()=>{e.closeUserSidebar()},className:"nav-btn",id:"user-profile-hide",children:(0,o.jsx)("i",{className:"ri-close-line"})})})}),(0,o.jsxs)("div",{className:"text-center p-4 border-bottom",children:[(0,o.jsx)("div",{className:"mb-4 d-flex justify-content-center",children:"Null"===e.activeUser.profilePicture?(0,o.jsx)("div",{className:"avatar-lg",children:(0,o.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary font-size-24",children:e.activeUser.name.charAt(0)})}):(0,o.jsx)("img",{src:e.activeUser.profilePicture,className:"rounded-circle avatar-lg img-thumbnail",alt:"chatvia"})}),(0,o.jsx)("h5",{className:"font-size-16 mb-1 text-truncate",children:e.activeUser.name}),(0,o.jsxs)("p",{className:"text-muted text-truncate mb-1",children:[(()=>{switch(e.activeUser.status){case"online":return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-success me-1"})});case"away":return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-warning me-1"})});case"offline":return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-secondary me-1"})});default:return}})(),"\u5728\u7dda"]})]}),(0,o.jsxs)(k.c,{style:{maxHeight:"100%"},className:"p-4 user-profile-desc",children:[(0,o.jsx)("div",{className:"text-muted",children:(0,o.jsx)("p",{className:"mb-4",children:h("")})}),(0,o.jsxs)("div",{id:"profile-user-accordion",className:"custom-accordion",children:[(0,o.jsx)(n.c,{className:"shadow-none border mb-2",children:(0,o.jsxs)(d.c,{title:"\u95dc\u65bc",iconClass:"ri-user-2-line",isOpen:s,toggleCollapse:()=>{a(!s),l(!1),r(!1)},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-muted mb-1",children:h("\u4f7f\u7528\u8005\u540d\u7a31")}),(0,o.jsx)("h5",{className:"font-size-14",children:e.activeUser.name})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("p",{className:"text-muted mb-1",children:h("\u500b\u6027\u7c3d\u540d")}),(0,o.jsxs)("h5",{className:"font-size-14",children:["\u8001\u95c6"===e.activeUser.name&&"\u4e16\u754c\u771f\u771f\u5047\u5047\uff01\u6211\u5011\u5f04\u5047\u6210\u771f\uff01","fish\ud83d\udc1f"===e.activeUser.name&&"\u8ab0\u4e0d\u611b\u8a87\u5f35\u7684\u6a19\u984c\u554a\uff5e\u55b5\ud83d\ude3b\ud83d\ude3b\ud83d\ude3b","from_where"===e.activeUser.name&&"\u6211\u611b\u4f86\u8def\u4e0d\u660e\u7684\u597d\u6771\u897f\uff5e","Picxxxx"===e.activeUser.name&&"\u662f\u8ab0P\u5716p\u5f88\u5927\uff1f\u662f\u6211\ud83d\ude3b","xxmatchxx"===e.activeUser.name&&"\u9ed1\u767d\u914d\uff01\u6211\u90fd\u7b2c\u4e00\u540d\uff01","emo\ud83d\ude12"===e.activeUser.name&&"\u770b\u6211\u6c23\u6b7b\u4f60\uff5e"]})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("p",{className:"text-muted mb-1",children:h("\u8ca0\u8cac\u9805\u76ee")}),(0,o.jsxs)("h5",{className:"font-size-14",children:["\u8001\u95c6"===e.activeUser.name&&"\u5047\u65b0\u805e\u80a1\u4efd\u6709\u9650\u516c\u53f8\u8463\u4e8b\u9577","fish\ud83d\udc1f"===e.activeUser.name&&"\u751f\u7522\u542b\u6709\u8a87\u5927\u6a19\u984c\u7684\u5047\u65b0\u805e","from_where"===e.activeUser.name&&"\u751f\u7522\u6c92\u6709\u4f86\u6e90\u7684\u5047\u65b0\u805e","Picxxxx"===e.activeUser.name&&"\u88fd\u9020\u5e36\u6709\u504f\u898b\u6216\u932f\u8aa4\u5716\u8868\u7684\u5047\u65b0\u805e","xxmatchxx"===e.activeUser.name&&"\u7528\u770b\u8d77\u4f86\u76f8\u95dc\u7684\u5047\u5716\u7247\u642d\u914d\u6587\u5b57\u88fd\u4f5c\u5047\u65b0\u805e","emo\ud83d\ude12"===e.activeUser.name&&"\u88fd\u9020\u770b\u4e86\u6703\u4f7f\u4eba\u611f\u5230\u5bb3\u6015\u3001\u751f\u6c23\u3001\u6216\u96e3\u904e\u7684\u5047\u65b0\u805e"]})]})]})}),!0===e.activeUser.isGroup&&(0,o.jsx)(n.c,{className:"mb-1 shadow-none border",children:(0,o.jsxs)(d.c,{title:"Members",iconClass:"ri-group-line",isOpen:c,toggleCollapse:()=>{r(!c),a(!1),l(!1)},children:[(0,o.jsx)(n.c,{className:"p-2 mb-2",children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:" align-self-center me-3",children:(0,o.jsx)("div",{className:"avatar-xs",children:(0,o.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:"S"})})}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"text-left",children:(0,o.jsxs)("h5",{className:"font-size-14 mb-1",children:[h("Sera Mullar"),(0,o.jsx)(oe.c,{color:"danger",className:"badge-soft-danger float-end",children:h("Admin")})]})})})]})}),(0,o.jsx)(n.c,{className:"p-2 mb-2",children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"chat-user-img align-self-center me-2",children:(0,o.jsx)("div",{className:"avatar-xs",children:(0,o.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:"O"})})}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"text-left",children:(0,o.jsx)("h5",{className:"font-size-14 mb-1",children:h("Ossie Wilson")})})})]})}),(0,o.jsx)(n.c,{className:"p-2 mb-2",children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"chat-avatar",children:(0,o.jsx)("img",{src:A,className:"rounded-circle chat-user-img avatar-xs me-3",alt:"chatvia"})}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"text-left",children:(0,o.jsx)("h5",{className:"font-size-14 mb-1",children:h("Paul Haynes")})})})]})})]})})]})]})]})})}));var ue=a(1424),xe=a(2152),ge=a(912);const pe=(0,i.Ul)((e=>{const{users:s,active_user:a}=e.Chat;return{...e.Layout,users:s,active_user:a}}),{openUserSidebar:O.SM,setFullUser:M})((function(e){const[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),[c,r]=(0,t.useState)(!1),[n,d]=(0,t.useState)(!1),m=s=>{s.preventDefault(),e.openUserSidebar()};return(0,o.jsx)(t.Fragment,{children:(0,o.jsx)("div",{className:"p-3 p-lg-4 border-bottom user-chat-topbar",children:(0,o.jsxs)(ue.c,{className:"align-items-center",children:[(0,o.jsx)(xe.c,{sm:4,xs:8,children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"d-block d-lg-none me-2 ms-0",children:(0,o.jsx)(U.cH,{to:"#",onClick:e=>function(e){e.preventDefault();var s=document.getElementsByClassName("user-chat");s&&s[0].classList.remove("user-chat-show")}(e),className:"user-chat-remove text-muted font-size-16 p-2",children:(0,o.jsx)("i",{className:"ri-arrow-left-s-line"})})}),"Null"!==e.users[e.active_user].profilePicture?(0,o.jsx)("div",{className:"me-3 ms-0",children:(0,o.jsx)("img",{src:e.users[e.active_user].profilePicture,className:"rounded-circle avatar-xs",alt:"chatvia"})}):(0,o.jsx)("div",{className:"chat-user-img align-self-center me-3",children:(0,o.jsx)("div",{className:"avatar-xs",children:(0,o.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:e.users[e.active_user].name.charAt(0)})})}),(0,o.jsx)("div",{className:"flex-grow-1 overflow-hidden",children:(0,o.jsxs)("h5",{className:"font-size-16 mb-0 text-truncate",children:[(0,o.jsx)(U.cH,{to:"#",onClick:e=>m(e),className:"text-reset user-profile-show",children:e.users[e.active_user].name}),(()=>{switch(e.users[e.active_user].status){case"online":return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-success d-inline-block ms-2"})});case"away":return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-warning d-inline-block ms-1"})});case"offline":return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"ri-record-circle-fill font-size-10 text-secondary d-inline-block ms-1"})});default:return}})()]})})]})}),(0,o.jsx)(xe.c,{sm:8,xs:4,children:(0,o.jsxs)("ul",{className:"list-inline user-chat-nav text-end mb-0",children:[(0,o.jsx)("li",{className:"list-inline-item"}),(0,o.jsx)("li",{className:"list-inline-item d-none d-lg-inline-block me-2 ms-0",children:(0,o.jsx)("button",{type:"button",onClick:()=>r(!c),className:"btn nav-btn",children:(0,o.jsx)("i",{className:"ri-phone-line"})})}),(0,o.jsx)("li",{className:"list-inline-item d-none d-lg-inline-block me-2 ms-0",children:(0,o.jsx)("button",{type:"button",onClick:()=>d(!n),className:"btn nav-btn",children:(0,o.jsx)("i",{className:"ri-vidicon-line"})})}),(0,o.jsx)("li",{className:"list-inline-item d-none d-lg-inline-block me-2 ms-0",children:(0,o.jsx)(Y.c,{type:"button",color:"none",onClick:e=>m(e),className:"nav-btn user-profile-show",children:(0,o.jsx)("i",{className:"ri-user-2-line"})})}),(0,o.jsx)("li",{className:"list-inline-item",children:(0,o.jsx)(ge.c,{isOpen:i,toggle:()=>l(!i)})})]})})]})})})}));var je=a(6400),ve=a(8056);a(1468);const Ne=function(e){const[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(null),[c]=(0,t.useState)(e.images),{t:r}=(0,b.Gy)(),n=e=>{a(!s),l(e)};return(0,o.jsx)(t.Fragment,{children:(0,o.jsxs)("ul",{className:"list-inline message-img  mb-0",children:[c.map(((e,s)=>(0,o.jsxs)("li",{className:"list-inline-item message-img-list",children:[(0,o.jsx)("div",{children:(0,o.jsx)(U.cH,{to:"#",onClick:()=>n(e.image),className:"popup-img d-inline-block m-1",title:"Project 1",children:(0,o.jsx)("img",{src:e.image,alt:"chat",className:"rounded border"})})}),(0,o.jsx)("div",{className:"message-img-link",children:(0,o.jsxs)("ul",{className:"list-inline mb-0",children:[(0,o.jsx)("li",{className:"list-inline-item",children:(0,o.jsx)(U.cH,{to:"#"})}),(0,o.jsx)(de.c,{tag:"li",className:"list-inline-item",children:(0,o.jsx)(je.c,{tag:"a"})})]})})]},s))),s&&(0,o.jsx)(ve.c,{mainSrc:i,onCloseRequest:n,imageTitle:"\u7167\u7247"})]})})};var fe=a(2048);a(2428);const be=function(e){const[s,a]=(0,t.useState)(""),[i,l]=(0,t.useState)(!1),[c,r]=(0,t.useState)({name:"",size:""}),[n,d]=(0,t.useState)("");return(0,t.useEffect)((()=>{a(e.textMessage)}),[e.textMessage]),(0,o.jsx)(t.Fragment,{children:(0,o.jsx)("div",{className:"chat-input-section p-3 p-lg-4 border-top mb-0 ",children:(0,o.jsx)(K.c,{onSubmit:t=>((s,t)=>{s.preventDefault(),e.canClick&&(""!==t&&(e.onaddMessage(t,"textMessage"),a("")),""!==c.name&&(e.onaddMessage(c,"fileMessage"),r({name:"",size:""})),""!==n&&(e.onaddMessage(n,"imageMessage"),d("")))})(t,s),children:(0,o.jsxs)(ue.c,{className:"g-0",children:[(0,o.jsx)(xe.c,{children:(0,o.jsx)("div",{children:(0,o.jsx)(F.c,{type:"text",value:s,onChange:e=>{a(e.target.value)},className:"form-control form-control-lg bg-light border-light",placeholder:"\u8f38\u5165\u8a0a\u606f",readOnly:!0})})}),(0,o.jsx)(xe.c,{xs:"auto",children:(0,o.jsx)("div",{className:"chat-input-links ms-md-2",children:(0,o.jsxs)("ul",{className:"list-inline mb-0 ms-0",children:[(0,o.jsxs)("li",{className:"list-inline-item input-file",children:[(0,o.jsxs)(J.c,{id:"images",className:"me-1 btn btn-link text-decoration-none font-size-16 btn-lg waves-effect",children:[(0,o.jsx)("i",{className:"ri-image-fill"}),(0,o.jsx)(F.c,{onChange:e=>(e=>{0!==e.target.files.length&&d(URL.createObjectURL(e.target.files[0]))})(e),accept:"image/*",type:"file",name:"fileInput",size:"60"})]}),(0,o.jsx)(fe.c,{target:"images",placement:"top",children:"\u7167\u7247"})]}),(0,o.jsx)("li",{className:"list-inline-item",children:(0,o.jsx)(Y.c,{type:"submit",color:"primary",className:"font-size-16 btn-lg chat-send waves-effect waves-light",children:(0,o.jsx)("i",{className:"ri-send-plane-2-fill"})})})]})})})]})})})})};var ye=a(9072),Ce=a.n(ye);const Se=function(e){const{t:s}=(0,b.Gy)(),[a,i]=(0,t.useState)(!1),[l]=(0,t.useState)(e.video);return(0,t.useEffect)((()=>{console.log(e.video)}),[]),(0,o.jsxs)(t.Fragment,{children:[(0,o.jsx)(n.c,{className:"p-2 mb-2",onClick:()=>{i(!a),console.log(l)},children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"avatar-sm me-3 ms-0",children:(0,o.jsx)("div",{className:"avatar-title bg-primary-subtle text-primary rounded font-size-20",children:(0,o.jsx)("i",{class:"ri-live-fill"})})}),(0,o.jsx)("div",{className:"flex-grow-1",children:(0,o.jsx)("div",{className:"text-start",children:(0,o.jsx)("h5",{className:"font-size-14 mb-1",children:e.video[0].videoName})})})]})}),(0,o.jsx)(Ce(),{toggler:a,sources:[e.video[0].video]})]})};const we=(0,me.c)((0,i.Ul)((e=>{const{active_user:s}=e.Chat,{userSidebar:a}=e.Layout,{activeTab:t}=e.Layout;return{active_user:s,userSidebar:a,activeTab:t}}),{openUserSidebar:O.SM,setFullUser:M,setActiveTab:O.iD})((function(e){var s;const[a,i]=(0,t.useState)(S);(0,t.useEffect)((()=>{const e=localStorage.getItem("headshot");i("1"===e?S:"2"===e?w:S)}),[]);const l=(0,t.useRef)(),[c,r]=(0,t.useState)(!1),{value:n,setValue:d,proFile:m,setProFile:h}=(0,t.useContext)(z.e),{t:u}=(0,b.Gy)(),[x]=(0,t.useState)(e.recentChatList),[g,p]=(0,t.useState)([]),[j,v]=(0,t.useState)({}),[N,f]=(0,t.useState)(""),[y,_]=(0,t.useState)({}),[L,F]=(0,t.useState)(!0),[U,T]=(0,t.useState)(!0),[M,O]=(0,t.useState)(0),[E,G]=(0,t.useState)([]);(0,t.useEffect)((()=>{l.current.recalculate(),l.current.el&&(l.current.getScrollElement().scrollTop=l.current.getScrollElement().scrollHeight)}),[e.active_user,e.recentChatList]),(0,t.useEffect)((()=>{v([...e.recentChatList.map((e=>e.messages))]),_((s=>{let a={};return e.recentChatList.forEach(((e,s)=>{a[s]=0})),a}));let s=[];e.recentChatList.forEach(((e,a)=>{let t=e.messages.map((e=>e.questions));t=t.filter(((e,s)=>isFinite(e)&&t.findIndex((s=>e===s))===s)),s.push(t.map((e=>({user:a,question:e}))))})),G([...[].concat.apply([],s)]);let a=[...x];a.forEach(((e,t)=>{t===[...[].concat.apply([],s)].find((e=>0===e.question)).user?(a[t].messages=[e.messages[0]],a[t].unRead=1):a[t].messages=[]})),e.setFullUser(a)}),[]),(0,t.useEffect)((()=>{f(""),F(!0)}),[e.active_user]),(0,t.useEffect)((()=>{if(m.end){let e=Object.keys(m).map((e=>"badge"!==e&&"".concat(e,"=").concat(m[e])));(null===m||void 0===m?void 0:m.badge)&&(e=[...e,...Object.keys(null===m||void 0===m?void 0:m.badge).map((e=>"".concat(e,"=").concat(m.badge[e])))].filter((e=>e))),window.location.assign("https://yuyan7498.github.io/chat-game-ending/?fail=0&".concat(e.join("&")))}}),[m]),(0,t.useEffect)((()=>{var s;if(L&&void 0!==y[e.active_user]&&void 0!==j[e.active_user]&&y[e.active_user]<(null===(s=j[e.active_user])||void 0===s?void 0:s.length)){var a,t;let s=null===(a=j[e.active_user])||void 0===a?void 0:a.find(((s,a)=>"sender"===s.userType&&y[e.active_user]<a));if(null!==(t=j[e.active_user][(null===s||void 0===s?void 0:s.id)-2])&&void 0!==t&&t.isanswer?T(!1):T(!0),null!==s&&void 0!==s&&s.questions&&(null===s||void 0===s?void 0:s.questions)!==M||f(null===s||void 0===s?void 0:s.message),null!==s&&void 0!==s&&s.id)if(j[e.active_user].filter(((e,a)=>a<(null===s||void 0===s?void 0:s.id)-1)).length===e.recentChatList[e.active_user].messages.length){let a=[...x];a[e.active_user].messages=[...j[e.active_user].filter(((e,a)=>a<(null===s||void 0===s?void 0:s.id)-1&&(!e.questions||M>=e.questions)))],e.setFullUser(a)}else q(null===s||void 0===s?void 0:s.id,e.active_user);else q(j[e.active_user].length,e.active_user);F(!1)}}),[y,L,e.active_user]);const I=()=>r(!c),q=(s,a)=>{let t=y[a]+1;const i=()=>{setTimeout((()=>{let l=[...x];l[a].messages=[...j[a].filter(((e,s)=>s<t&&(!e.questions||M>=e.questions)))],e.setFullUser(l),t++,t<s&&i()}),1e3)};i()},P=(s,a)=>{var t;var i=(new Date).getSeconds();switch(a){case"textMessage":({id:g.length+1,message:s,time:"00:"+i,userType:"sender",image:D,isFileMessage:!1,isImageMessage:!1});break;case"fileMessage":({id:g.length+1,message:"file",fileMessage:s.name,size:s.size,time:"00:"+i,userType:"sender",image:D,isFileMessage:!0,isImageMessage:!1});break;case"imageMessage":var c=[{image:s}];({id:g.length+1,message:"image",imageMessage:c,size:s.size,time:"00:"+i,userType:"sender",image:D,isImageMessage:!0,isFileMessage:!1})}let r=null===(t=j[e.active_user])||void 0===t?void 0:t.find(((s,a)=>"sender"===s.userType&&y[e.active_user]<a));if(_((s=>{var a;return s[e.active_user]=null!==r&&void 0!==r&&r.id?(null===r||void 0===r?void 0:r.id)-1:null===(a=j[e.active_user])||void 0===a?void 0:a.length,{...s}})),"\u540c\u610f"===N){let s=[...x];s[e.active_user].messages=[...j[e.active_user].filter(((s,a)=>a<y[e.active_user]+1))],e.setFullUser(s),A(E.find((e=>e.question===M+1)).user),O((e=>e+1))}else if("\u78ba\u5b9a\u767c\u4f48"===N){let s=[...x];s[e.active_user].messages=[...j[e.active_user].filter(((s,a)=>a<y[e.active_user]+1))],e.setFullUser(s),e.setActiveTab("group"),H(),void 0!==E.find((e=>e.question===M+1))?A(E.find((e=>e.question===M+1)).user):h({...m,end:!0}),O((e=>e+1))}else F(!0);l.current.el&&(l.current.getScrollElement().scrollTop=l.current.getScrollElement().scrollHeight)},A=s=>{var a,t;let i=null===(a=j[s])||void 0===a?void 0:a.find(((e,a)=>"sender"===e.userType&&y[s]<a));if(null!==(t=j[s][(null===i||void 0===i?void 0:i.id)-2])&&void 0!==t&&t.isanswer?T(!1):T(!0),void 0===E.find((e=>e.question===M+1))&&h({...m,end:!0}),null!==i&&void 0!==i&&i.id){let a=[...x],t=j[s].filter(((e,s)=>s<(null===i||void 0===i?void 0:i.id)-1&&(!e.questions||M+1>=e.questions)));a[s].unRead=t.length-a[s].messages.length,a[s].messages=[...t],e.setFullUser(a)}else{let a=[...x],t=j[s].filter(((e,a)=>a<j[s].length-1&&(!e.questions||M+1>=e.questions)));a[s].unRead=t.length-a[s].messages.length,a[s].messages=[...t],e.setFullUser(a)}},H=()=>{var e=document.getElementsByClassName("user-chat");e&&e[0].classList.remove("user-chat-show")};return(0,o.jsx)(t.Fragment,{children:(0,o.jsx)("div",{className:"user-chat w-100 overflow-hidden",children:(0,o.jsxs)("div",{className:"d-lg-flex",children:[(0,o.jsxs)("div",{className:e.userSidebar?"w-70 overflow-hidden position-relative":"w-100 overflow-hidden position-relative",children:[(0,o.jsx)(pe,{}),(0,o.jsx)(k.c,{style:{maxHeight:"100%"},ref:l,className:"chat-conversation p-5 p-lg-4",id:"messages",children:(0,o.jsx)("ul",{className:"list-unstyled mb-0",children:null===(s=e.recentChatList[e.active_user])||void 0===s?void 0:s.messages.map(((s,t)=>s.isToday&&!0===s.isToday?(0,o.jsx)("li",{children:(0,o.jsx)("div",{className:"chat-day-title",children:(0,o.jsx)("span",{className:"title",children:"\u4eca\u5929"})})},"dayTitle"+t):!0===e.recentChatList[e.active_user].isGroup?(0,o.jsx)("li",{className:"sender"===s.userType?"right":"",children:(0,o.jsxs)("div",{className:"conversation-list",children:[(0,o.jsx)("div",{className:"chat-avatar",children:"sender"===s.userType?(0,o.jsx)("img",{src:C,alt:"chatvia"}):"Null"===e.recentChatList[e.active_user].profilePicture?(0,o.jsx)("div",{className:"chat-user-img align-self-center me-3",children:(0,o.jsx)("div",{className:"avatar-xs",children:(0,o.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:s.userName&&s.userName.charAt(0)})})}):(0,o.jsx)("img",{src:e.recentChatList[e.active_user].profilePicture,alt:"chatvia"})}),(0,o.jsxs)("div",{className:"user-chat-content",children:[(0,o.jsxs)("div",{className:"ctext-wrap",children:[(0,o.jsxs)("div",{className:"ctext-wrap-content",children:[s.message&&(0,o.jsx)("p",{className:"mb-0",children:s.message}),s.imageMessage&&(0,o.jsx)(Ne,{images:s.imageMessage}),s.fileMessage&&(0,o.jsx)(Se,{video:s.fileMessage,fileSize:s.size}),s.isTyping&&(0,o.jsxs)("p",{className:"mb-0",children:["typing",(0,o.jsxs)("span",{className:"animate-typing",children:[(0,o.jsx)("span",{className:"dot ms-1"}),(0,o.jsx)("span",{className:"dot ms-1"}),(0,o.jsx)("span",{className:"dot ms-1"})]})]}),!s.isTyping&&(0,o.jsxs)("p",{className:"chat-time mb-0",children:[(0,o.jsx)("i",{className:"ri-time-line align-middle"})," ",(0,o.jsx)("span",{className:"align-middle",children:s.time})]})]}),!s.isTyping&&(0,o.jsx)(de.c,{className:"align-self-start"})]}),(0,o.jsx)("div",{className:"conversation-name",children:"sender"===s.userType?"Patricia Smith":s.userName})]})]})},t):t>y[e.active_user]&&s.isanswer?(0,o.jsx)("li",{onClick:()=>(s=>{var a,t,i;let l={...m};Object.keys(s.isanswer).forEach((e=>{"badge"===e?(void 0===l[e]&&(l[e]={}),void 0!==l[e][s.isanswer[e]]?l[e]["".concat(s.isanswer[e])]+=1:l[e]["".concat(s.isanswer[e])]=1):s.isanswer[e]&&(l[e]=(void 0!==l[e]?l[e]:"credit"===e?10:0)+s.isanswer[e])})),h({...l,end:!1}),P("","");let c=[{img:"",title:""},...n],r=null===(a=j[e.active_user].filter((e=>e.questions===s.questions)).find((e=>e.imageMessage&&!e.isanswer)))||void 0===a||null===(t=a.imageMessage)||void 0===t||null===(i=t.find((e=>e)))||void 0===i?void 0:i.image;void 0!==r&&(c[c.length-s.questions].img=r),c[c.length-s.questions].title="",s.answerImg?c[c.length-s.questions].img=s.answerImg.find((e=>e)).image:s.answerFile?c[c.length-s.questions].video=s.answerFile.find((e=>e)).video:c[c.length-s.questions].title=s.message,d(c)})(s),className:"sender"===s.userType?"right":"",children:(0,o.jsxs)("div",{className:"conversation-list",children:[g[t+1]&&g[t].userType===g[t+1].userType?(0,o.jsx)("div",{className:"chat-avatar",children:(0,o.jsx)("div",{className:"blank-div"})}):(0,o.jsx)("div",{className:"chat-avatar",children:"sender"===s.userType?(0,o.jsx)("img",{src:C,alt:"chatvia"}):"Null"===e.recentChatList[e.active_user].profilePicture?(0,o.jsx)("div",{className:"chat-user-img align-self-center me-3",children:(0,o.jsx)("div",{className:"avatar-xs",children:(0,o.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:e.recentChatList[e.active_user].name.charAt(0)})})}):(0,o.jsx)("img",{src:e.recentChatList[e.active_user].profilePicture,alt:"chatvia"})}),(0,o.jsxs)("div",{className:"user-chat-content",children:[(0,o.jsxs)("div",{className:"ctext-wrap",children:[(0,o.jsxs)("div",{className:"ctext-wrap-content",children:[s.message&&(0,o.jsx)("p",{className:"mb-0",children:s.message}),s.imageMessage&&(0,o.jsx)(Ne,{images:s.imageMessage}),s.fileMessage&&(0,o.jsx)(Se,{video:s.fileMessage}),s.isTyping&&(0,o.jsxs)("p",{className:"mb-0",children:["typing",(0,o.jsxs)("span",{className:"animate-typing",children:[(0,o.jsx)("span",{className:"dot ms-1"}),(0,o.jsx)("span",{className:"dot ms-1"}),(0,o.jsx)("span",{className:"dot ms-1"})]})]}),!s.isTyping&&(0,o.jsxs)("p",{className:"chat-time mb-0",children:[(0,o.jsx)("i",{className:"ri-time-line align-middle"})," ",(0,o.jsx)("span",{className:"align-middle",children:s.time})]})]}),!s.isTyping&&(0,o.jsx)(de.c,{className:"align-self-start ms-1"})]}),g[t+1]&&g[t].userType===g[t+1].userType?null:(0,o.jsx)("div",{className:"conversation-name",children:"sender"===s.userType?localStorage.getItem("username"):e.recentChatList[e.active_user].name})]})]})},t):(0,o.jsx)("li",{className:"sender"===s.userType?"right":"",children:(0,o.jsxs)("div",{className:"conversation-list",children:[g[t+1]?g[t].userType===g[t+1].userType?(0,o.jsx)("div",{className:"chat-avatar",children:(0,o.jsx)("div",{className:"blank-div"})}):(0,o.jsx)("div",{className:"chat-avatar",children:"sender"===s.userType?(0,o.jsx)("img",{src:C,alt:"chatvia"}):"Null"===e.recentChatList[e.active_user].profilePicture?(0,o.jsx)("div",{className:"chat-user-img align-self-center me-3",children:(0,o.jsx)("div",{className:"avatar-xs",children:(0,o.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:e.recentChatList[e.active_user].name.charAt(0)})})}):(0,o.jsx)("img",{src:e.recentChatList[e.active_user].profilePicture,alt:"chatvia"})}):(0,o.jsx)("div",{className:"chat-avatar",children:"sender"===s.userType?(0,o.jsx)("img",{src:a,alt:"user"}):"Null"===e.recentChatList[e.active_user].profilePicture?(0,o.jsx)("div",{className:"chat-user-img align-self-center me-3",children:(0,o.jsx)("div",{className:"avatar-xs",children:(0,o.jsx)("span",{className:"avatar-title rounded-circle bg-primary-subtle text-primary",children:e.recentChatList[e.active_user].name.charAt(0)})})}):(0,o.jsx)("img",{src:e.recentChatList[e.active_user].profilePicture,alt:"chatvia"})}),(0,o.jsxs)("div",{className:"user-chat-content",children:[(0,o.jsxs)("div",{className:"ctext-wrap",children:[(0,o.jsxs)("div",{className:"ctext-wrap-content",children:[s.message&&(0,o.jsx)("p",{className:"mb-0",children:s.message}),s.imageMessage&&(0,o.jsx)(Ne,{images:s.imageMessage}),s.fileMessage&&(0,o.jsx)(Se,{video:s.fileMessage,fileSize:s.size}),s.isTyping&&(0,o.jsxs)("p",{className:"mb-0",children:["typing",(0,o.jsxs)("span",{className:"animate-typing",children:[(0,o.jsx)("span",{className:"dot ms-1"}),(0,o.jsx)("span",{className:"dot ms-1"}),(0,o.jsx)("span",{className:"dot ms-1"})]})]}),!s.isTyping&&(0,o.jsxs)("p",{className:"chat-time mb-0",children:[(0,o.jsx)("i",{className:"ri-time-line align-middle"})," ",(0,o.jsx)("span",{className:"align-middle",children:s.time})]})]}),!s.isTyping&&(0,o.jsx)(de.c,{className:"align-self-start ms-1"})]}),g[t+1]&&g[t].userType===g[t+1].userType?null:(0,o.jsx)("div",{className:"conversation-name",children:"sender"===s.userType?localStorage.getItem("username"):e.recentChatList[e.active_user].name})]})]})},t)))})}),(0,o.jsxs)(X.c,{backdrop:"static",isOpen:c,centered:!0,toggle:I,children:[(0,o.jsx)(W.c,{toggle:I,children:"Forward to..."}),(0,o.jsx)(V.c,{children:(0,o.jsxs)(ee.c,{className:"p-2",children:[(0,o.jsx)(k.c,{style:{maxHeight:"200px"},children:(0,o.jsx)(le,{handleCheck:()=>{}})}),(0,o.jsx)(se.c,{className:"border-0",children:(0,o.jsx)(Y.c,{color:"primary",children:"Forward"})})]})})]}),(0,o.jsx)(be,{onaddMessage:P,canClick:U,textMessage:N})]}),(0,o.jsx)(he,{activeUser:e.recentChatList[e.active_user]})]})})})})));class ke extends t.Component{render(){return document.title="\u804a\u5929\u5ba4 | \u5047\u65b0\u805e\u80a1\u4efd\u6709\u9650\u516c\u53f8",(0,o.jsxs)(t.Fragment,{children:[(0,o.jsx)(ne,{recentChatList:this.props.users}),(0,o.jsx)(we,{recentChatList:this.props.users})]})}}const ze=(0,i.Ul)((e=>{const{users:s}=e.Chat;return{users:s}}),{})(ke)}}]);